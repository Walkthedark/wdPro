(function(f){$CONST={BoundType:{F_String:0,F_Float:1,F_Date:2,F_Boolean:3,F_Clob:4,F_Long:5,F_Int:6}};$IECache={slocalStorage:function(){try{var a="undefined"!==typeof window.localStorage;a&&(localStorage.setItem("autocompleterTEST","t"),localStorage.removeItem("autocompleterTEST"));return a}catch(b){}},set:function(a,b){if(this.slocalStorage)try{return localStorage.setItem(a,b)}catch(c){return f.cookie(a,b)}else return f.cookie(a,b)},get:function(a){if(this.slocalStorage)try{return localStorage.getItem(a)}catch(b){return f.cookie(a)}else return f.cookie(a)}};f.cookie=function(a,b,c){if("undefined"!=typeof b){c=c||{};null===b&&(b="",c.expires=-1);var d="";c.expires&&("number"==typeof c.expires||c.expires.toUTCString)&&("number"==typeof c.expires?(d=new Date,d.setTime(d.getTime()+864E5*c.expires)):d=c.expires,d="; expires\x3d"+d.toUTCString());var e=c.path?"; path\x3d"+c.path:"",g=c.domain?"; domain\x3d"+c.domain:"";c=c.secure?"; secure":"";document.cookie=[a,"\x3d",encodeURIComponent(b),d,e,g,c].join("")}else{b=null;if(document.cookie&&""!=document.cookie)for(c=document.cookie.split(";"),d=0;d<c.length;d++)if(e=jQuery.trim(c[d]),e.substring(0,a.length+1)==a+"\x3d"){b=decodeURIComponent(e.substring(a.length+1));break}return b}};f.fn.lockMouseWheel=function(){return f(this)};f.fn.switchClass=function(a,b){return this.hasClass(a)?this.swapClass(a,b):this.swapClass(b,a)};f.fn.forceClass=function(a){var b=f(this);b.each(function(b,d){if(!f(d).hasClass(a))return f(d).addClass(a)});return b};String.leftPad=function(a,b,c){a=new String(a);for(null==c&&(c=" ");a.length<b;)a=c+a;return a};String.escape=function(a){return(new String(a)).replace(/('|\\)/g,"\\$1")};String.prototype.length2=function(a){return this.replace(/[^\x00-\xff]/g,a||"**").length};String.prototype.abbr=function(a,b){if(void 0===a||isNaN(a)||3>a)return this;b=b||2;var c="",d=0;a-=3;for(var e=0;e<this.length;e++){d=null!=this[e].match(/[^\x00-\xff]/ig)?d+b:d+1;if(d>a){c+="...";break}c+=this[e]}return c};String.prototype.startWith=function(a){return(new RegExp("^"+a)).test(this)};String.prototype.endWith=function(a){return(new RegExp(a+"$")).test(this)};String.prototype.ltrim=function(){return this.replace(/(^[\\s]*)/g,"")};String.prototype.rtrim=function(){return this.replace(/([\\s]*$)/g,"")};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gmi"),b)};Date.prototype.format=function(a){void 0==a&&(a="yyyy-MM-dd HH:mm:ss");var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds(),w:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(this.getDay())};/(y+)/i.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};Date.prototype.format2=function(a){void 0==a&&(a="Y-m-d H:i:s");var b=this.getFullYear(),c="0"+(this.getMonth()+1),c=c.substring(c.length-2),d="0"+this.getDate(),d=d.substring(d.length-2),e="0"+this.getHours(),e=e.substring(e.length-2),g="0"+this.getMinutes(),g=g.substring(g.length-2),f="0"+this.getSeconds(),f=f.substring(f.length-2),h=this.getMilliseconds(),k="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(this.getDay());return a.replace("Y",b).replace("m",c).replace("d",d).replace("H",e).replace("i",g).replace("s",f).replace("S",h).replace("w",k)};Date.prototype.zero=function(){this.setHours(0,0,0,0);return this};Date.prototype.countDaysInMonth=function(){return(new Date(this.getFullYear(),this.getMonth()+1,0)).getDate()};Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(a){if("unixtime"==a)return parseInt(this.getTime()/1E3);null==Date.formatFunctions[a]&&Date.createNewFormat(a);return this[Date.formatFunctions[a]]()};Date.createNewFormat=function(a){var b="format_"+Date.formatFunctions.count++;Date.formatFunctions[a]=b;for(var b="Date.prototype."+b+" \x3d function() {return ",c=!1,d,e=0;e<a.length;++e)d=a.charAt(e),c||"\\"!=d?c?(c=!1,b+="'"+String.escape(d)+"' + "):b+=Date.getFormatCode(d):c=!0;eval(b.substring(0,b.length-3)+";}")};Date.getFormatCode=function(a){switch(a){case "d":return"String.leftPad(this.getDate(), 2, '0') + ";case "D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case "j":return"this.getDate() + ";case "l":return"Date.dayNames[this.getDay()] + ";case "S":return"this.getSuffix() + ";case "w":return"this.getDay() + ";case "z":return"this.getDayOfYear() + ";case "W":return"this.getWeekOfYear() + ";case "F":return"Date.monthNames[this.getMonth()] + ";case "m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case "M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case "n":return"(this.getMonth() + 1) + ";case "t":return"this.getDaysInMonth() + ";case "L":return"(this.isLeapYear() ? 1 : 0) + ";case "Y":return"this.getFullYear() + ";case "y":return"('' + this.getFullYear()).substring(2, 4) + ";case "a":return"(this.getHours() \x3c 12 ? 'am' : 'pm') + ";case "A":return"(this.getHours() \x3c 12 ? 'AM' : 'PM') + ";case "g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case "G":return"this.getHours() + ";case "h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case "H":return"String.leftPad(this.getHours(), 2, '0') + ";case "i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case "s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case "O":return"this.getGMTOffset() + ";case "T":return"this.getTimezone() + ";case "Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(a)+"' + "}};Date.parseDate=function(a,b){if("unixtime"==b)return new Date(isNaN(parseInt(a))?0:1E3*parseInt(a));null==Date.parseFunctions[b]&&Date.createParser(b);return Date[Date.parseFunctions[b]](a)};Date.createParser=function(a){var b="parse"+Date.parseFunctions.count++,c=Date.parseRegexes.length,d=1;Date.parseFunctions[a]=b;for(var b="Date."+b+" \x3d function(input) {\nvar y \x3d -1, m \x3d -1, d \x3d -1, h \x3d -1, i \x3d -1, s \x3d -1, S\x3d-1, z \x3d -1;\nvar d \x3d new Date();\ny \x3d d.getFullYear();\nm \x3d d.getMonth();\nd \x3d d.getDate();\nvar results \x3d input.match(Date.parseRegexes["+c+"]);\nif (results \x26\x26 results.length \x3e 0) {\n",e="",g=!1,f,h=0;h<a.length;++h)f=a.charAt(h),g||"\\"!=f?g?(g=!1,e+=String.escape(f)):(obj=Date.formatCodeToRegex(f,d),d+=obj.g,e+=obj.s,obj.g&&obj.c&&(b+=obj.c)):g=!0;Date.parseRegexes[c]=new RegExp("^"+e+"$");eval(b+"if (y \x3e 0 \x26\x26 z \x3e 0){\nvar doyDate \x3d new Date(y,0);\ndoyDate.setDate(z);\nm \x3d doyDate.getMonth();\nd \x3d doyDate.getDate();\n}if (y \x3e 0 \x26\x26 m \x3e\x3d 0 \x26\x26 d \x3e 0 \x26\x26 h \x3e\x3d 0 \x26\x26 i \x3e\x3d 0 \x26\x26 s \x3e\x3d 0 \x26\x26 S \x3e\x3d 0)\n{return new Date(y, m, d, h, i, s, S);}\nelse if (y \x3e 0 \x26\x26 m \x3e\x3d 0 \x26\x26 d \x3e 0 \x26\x26 h \x3e\x3d 0 \x26\x26 i \x3e\x3d 0 \x26\x26 s \x3e\x3d 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y \x3e 0 \x26\x26 m \x3e\x3d 0 \x26\x26 d \x3e 0 \x26\x26 h \x3e\x3d 0 \x26\x26 i \x3e\x3d 0)\n{return new Date(y, m, d, h, i);}\nelse if (y \x3e 0 \x26\x26 m \x3e\x3d 0 \x26\x26 d \x3e 0 \x26\x26 h \x3e\x3d 0)\n{return new Date(y, m, d, h);}\nelse if (y \x3e 0 \x26\x26 m \x3e\x3d 0 \x26\x26 d \x3e 0)\n{return new Date(y, m, d);}\nelse if (y \x3e 0 \x26\x26 m \x3e\x3d 0)\n{return new Date(y, m);}\nelse if (y \x3e 0)\n{return new Date(y);}\n}return null;}")};Date.formatCodeToRegex=function(a,b){switch(a){case "D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case "j":case "d":return{g:1,c:"d \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case "l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case "E":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case "w":return{g:0,c:null,s:"\\d"};case "z":return{g:1,c:"z \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{1,3})"};case "W":return{g:0,c:null,s:"(?:\\d{2})"};case "F":return{g:1,c:"m \x3d parseInt(Date.monthNumbers[results["+b+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case "M":return{g:1,c:"m \x3d parseInt(Date.monthNumbers[results["+b+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case "n":case "m":return{g:1,c:"m \x3d parseInt(results["+b+"], 10) - 1;\n",s:"(\\d{1,2})"};case "t":return{g:0,c:null,s:"\\d{1,2}"};case "L":return{g:0,c:null,s:"(?:1|0)"};case "Y":return{g:1,c:"y \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{4})"};case "y":return{g:1,c:"var ty \x3d parseInt(results["+b+"], 10);\ny \x3d ty \x3e Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case "a":return{g:1,c:"if (results["+b+"] \x3d\x3d 'am') {\nif (h \x3d\x3d 12) { h \x3d 0; }\n} else { if (h \x3c 12) { h +\x3d 12; }}",s:"(am|pm)"};case "A":return{g:1,c:"if (results["+b+"] \x3d\x3d 'AM') {\nif (h \x3d\x3d 12) { h \x3d 0; }\n} else { if (h \x3c 12) { h +\x3d 12; }}",s:"(AM|PM)"};case "g":case "G":case "h":case "H":return{g:1,c:"h \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{1,2})"};case "i":return{g:1,c:"i \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case "s":return{g:1,c:"s \x3d parseInt(results["+b+"], 10);\n",s:"(\\d{2})"};case "S":return{g:1,c:"S \x3d (results.length\x3e"+b+"? parseInt(results["+b+"]) : -1);\n",s:"(\\d{1,3})"};case "O":return{g:0,c:null,s:"[+-]\\d{4}"};case "T":return{g:0,c:null,s:"[A-Z]{3}"};case "Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(a)}}};Date.prototype.toJSON=function(){return this.format("yyyy-MM-dd HH:mm:ss")};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(0<this.getTimezoneOffset()?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var a=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b)a+=Date.daysInMonth[b];return a+this.getDate()};Date.prototype.getWeekOfYear=function(){var a=this.getDayOfYear()+(4-this.getDay()),b=7-(new Date(this.getFullYear(),0,1)).getDay()+4;return String.leftPad(Math.ceil((a-b)/7)+1,2,"0")};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return 0==(a&3)&&(a%100||0==a%400&&a)};Date.prototype.getFirstDayOfMonth=function(){var a=(this.getDay()-(this.getDate()-1))%7;return 0>a?a+7:a};Date.prototype.getLastDayOfMonth=function(){var a=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>a?a+7:a};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames="January February March April May June July August September October November December".split(" ");Date.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601SlatPattern:"Y/m/d H:i:s",ISO8601LongPattern:"Y-m-d H:i:s",ISO8601LongestPattern:"Y-m-d H:i:s.S",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};Array.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return!0;return!1};Array.prototype.remove=function(a){a=this.indexOf(a);return 0<=a?(this.splice(a,1),!0):!1};Array.prototype.swap=function(a,b){this[a]=this.splice(b,1,this[a])[0];return this};Array.prototype.insert=function(a,b){return this.splice(a,0,b)};$SysCache={pages:{}};$RunPageCache={};$RunSqlResult={};$PF={pageVerList:{},loadPagesVers:function(){var a=this;$F.post("RunPageVersion",{async:!0,data:{token:$T.runkey,pId:""},s:function(b){0<b.code?(a.pageVerList=b.value,console.log("pageList",b)):$F.err("RunPageVersion","\u6216\u8005\u9875\u9762\u7248\u672c\u4fe1\u606f\u5931\u8d25",b)},f:function(a){$F.err("RunPageVersion","\u6216\u8005\u9875\u9762\u7248\u672c\u4fe1\u606f\u5931\u8d25",a)}})},getOnePageVer:function(a){if(a){var b=this;if(b.pageVerList.hasOwnProperty(a))return b.pageVerList[a];var c;$F.post("RunPageVersion",{async:!1,data:{token:$T.runkey,pId:a},s:function(d){0<d.code?(c=d.message,b.pageVerList[a]=c):$F.err("RunPageVersion","\u6216\u8005\u9875\u9762\u7248\u672c\u4fe1\u606f\u5931\u8d25",d)},f:function(a){$F.err("RunPageVersion","\u6216\u8005\u9875\u9762\u7248\u672c\u4fe1\u606f\u5931\u8d25",a)}});return c}return""},doPageDo1_Sub:function(a,b,c,d){return{pId:a,sqlId:b,para:c,ss:d}},doPageDo66:function(a,b,c){a=void 0==a?!1:a;var d=f.extend({token:$T.runkey},b);$F.log("DOSERVER","doPageDo66:para",d);$F.post("RunPageDo66",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo66","SQL66 \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo1:function(a,b,c){a=void 0==a?!1:a;var d=f.extend({token:$T.runkey},b);$F.log("DOSERVER","doPageDo1:para",d);$F.post("RunPageDo1",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo1","SQL1 \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo500:function(a,b,c){a=void 0==a?!1:a;var d=f.extend({token:$T.runkey},b);$F.log("DOSERVER","doPageDo500:para",d);$F.post("RunPageDo500",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo500","call service \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDoBuildKey:function(a,b,c,d,e,g,m,h,k){var l={token:$T.runkey,dbPool:b,key:c,visKey:d,showFlag:e,beginId:g,addFlag:m,len:h};$F.log("DOSERVER","doPageDoBuildKey:para",l);b={async:!1,data:l,s:k,f:function(a){$F.err("doPageDoBuildKey","RunPageBuildKey \u6267\u884c\u5931\u8d25"+JSON.stringify(l),a);f.isFunction(k)&&k({code:-100,message:a.toString()})}};a&&""!=a.trim()?a.endWith("/")?$F.postCur("transData?url\x3d"+encodeURIComponent(a+"RunPageBuildKey"),b):$F.postCur("transData?url\x3d"+encodeURIComponent(a+"/RunPageBuildKey"),b):$F.post("RunPageBuildKey",b)},doPageDo501:function(a,b,c){a=void 0==a?!1:a;var d=f.extend({token:$T.runkey},b);$F.log("DOSERVER","doPageDo501:para",d);$F.post("RunPageDo501",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo501","call service \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo1s:function(a,b,c){a=void 0==a?!1:a;var d={token:$T.runkey,sqls:b};$F.log("DOSERVER","doPageDo1s:para",d);$F.post("RunPageDo1s",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo1s","SQL1s \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo2:function(a,b,c){a=void 0==a?!1:a;var d=f.extend({token:$T.runkey},b);$F.log("DOSERVER","doPageDo2:para",d);$F.post("RunPageDo2",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo2","SQL2 \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo2s:function(a,b,c){a=void 0==a?!1:a;var d={token:$T.runkey,sqls:b};$F.log("DOSERVER","doPageDo2s:para",d);$F.post("RunPageDo2s",{async:a,data:d,s:c,f:function(a){$F.err("doPageDo2s","SQL2s \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})},doPageDo2MPage:function(a,b,c,d,e){a=void 0==a?!1:a;var g=f.extend({token:$T.runkey,page:b,rows:c},d);$F.log("DOSERVER","doPageDo2MPage:para",g);$F.post("RunPageDo2MPage",{async:a,data:g,s:e,f:function(a){$F.err("RunPageDo2MPage","RunPageDo2MPage \u6267\u884c\u5931\u8d25"+JSON.stringify(g),a);f.isFunction(e)&&e({code:-100,message:a.toString()})}})},doPageDoP1000:function(a,b,c,d,e){a=void 0==a?!1:a;var g={token:$T.runkey,pId:b,sqlId:c,para:d};$F.log("DOSERVER","doPageDoP1000:para",g);$F.post("RunPageDoP1000",{async:a,data:g,s:e,f:function(a){$F.err("RunPageDoP1000","RunPageDoP1000 \u6267\u884c\u5931\u8d25"+JSON.stringify(g),a);f.isFunction(e)&&e({code:-100,message:a.toString()})}})},doPageLoad:function(a,b,c,d){a=void 0==a?!1:a;var e={token:$T.runkey,pId:b,para:c};$F.log("DOSERVER","doPageLoad:para",e);$F.post("RunPageReadData",{async:a,data:e,s:d,f:function(a){$F.err("doPageLoad","doPageLoad \u6267\u884c\u5931\u8d25"+JSON.stringify(e),a);f.isFunction(d)&&d({code:-100,message:a.toString()})}})},doPageSave:function(a,b,c){a=void 0==a?!1:a;var d={token:$T.runkey,data:b};$F.log("DOSERVER","RunSave:para",d);$F.post("RunPageSaveData",{async:a,data:d,s:c,f:function(a){$F.err("doPageSaveData","doPageSave \u6267\u884c\u5931\u8d25"+JSON.stringify(d),a);f.isFunction(c)&&c({code:-100,message:a.toString()})}})}};$FTree={treeDataMerge:function(a,b,c,d,e,g,m){if(b&&-1<b.count){var h=$F.getFIndex(b,c),k=$F.getFIndex(b,d),l=$F.getFIndex(b,e),p=$F.getFIndex(b,g),n=$F.getFIndex(b,m);f.each(b.fields,function(b,c){if(b=a[c[h]])if(b.nodes||(b.nodes=[]),b.nodes){var d={folder:!1,id:c[k],text:c[l],pId:c[h],v:c},e=c[p];e&&""!=e.trim()?d.icon="fa "+e:d.icon="fa fa-pagelines";-1<n&&(d.count=c[n]);b.nodes.push(d)}})}},mergeTreeLastNode:function(a,b,c,d,e,g,m,h){if(c)if(d&&e&&g){var k=[];k.push($F.doSysDo2_Sql(c,0,0,{}));$F.doSysDo2(b,k,function(b){if(0<b.code){b=b.value[0];var c=$F.getFIndex(b,d),k=$F.getFIndex(b,e),l=$F.getFIndex(b,g),r=$F.getFIndex(b,m);f.each(b.fields,function(b,d){if(b=a[d[c]])if(b.nodes||(b.nodes=[]),b.nodes){var e={folder:!1,id:d[k],text:d[l],pId:d[c],v:d};(d=d[r])&&""!=d.trim()?e.icon="fa "+d:e.icon="fa fa-pagelines";b.nodes.push(e)}});f.isFunction(h)&&h(1)}else console.error("\u6811\u672b\u7ea7\u8282\u70b9\u6570\u636e\u52a0\u5f00\u5931\u8d25"),f.isFunction(h)&&h(0)},function(a){f.isFunction(h)&&h(0)})}else console.error("\u672a\u4f20\u5165\u672b\u7ea7\u8282\u70b9KEY"),f.isFunction(h)&&h(0);else f.isFunction(h)&&h(1)},treeReBuildNameIco:function(a,b,c,d,e){var g={},m=function(a){f.each(a,function(a,f){g[f.id]=f;-1<b&&(f.text=f.v[b]);d&&(f.folder=!0);f.nodes&&m(f.nodes);-1<c&&((a=f.v[c])&&""!=a.trim()?f.icon="fa "+a:f.folder||f.nodes&&0<f.nodes.length?f.img="icon-folder":f.icon="fa fa-pagelines");-1<e&&(f.count=f.v[e])})};m(a);return g}};$F={getGridMapData:function(a){if(w2ui[a]){var b=[];f.each(w2ui[a].records,function(a,d){if(!f.isFunction(d)){var c={};for(a in d)"recid"!=a&"editFlag"!=a&&!f.isFunction(d[a])&&(c[a]=d[a]);b.push(c)}});return b}return[]},copyObj:function(a){return f.extend(!0,{},a)},sTU:function(a){return void 0==a?"":(a+"").trim().toUpperCase()},sTT:function(a){return void 0==a?"":(a+"").trim()},sL:function(a){return void 0==a?0:(a+"").trim().length},sTL:function(a){return void 0==a?"":(a+"").trim().toLowerCase()},mapCount:function(a){var b=0;f.isPlainObject(a)&&f.each(a,function(a,d){void 0!=d&&b++});return b},mapKeyIn:function(a,b){return a.hasOwnProperty(b)?!0:!1},readImg:function(a,b,c){var d={code:-1,message:"unknow"};a={name:"Img.Read.Server",token:$T.runkey,pic:a,type:b};c&&f.extend(a,c);$F.post("genObjN",{async:!1,data:a,f:function(a){d={code:-1,message:a}},s:function(a){d=a}});return d},isArray:function(a){return a?f.isArray(a):!1},isArrayAndNEP:function(a){return $F.isArray(a)&&0<a.length?!0:!1},NVLS:function(a){return a?a:""},isPCRunTime:function(){for(var a=navigator.userAgent,b="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod;micromessenger".split(";"),c=0;c<b.length;c++)if(0<a.indexOf(b[c]))return-1<a.toLowerCase().indexOf("micromessenger")?2:1;return 0},strInArray:function(a,b,c){if($F.isArray(a)){b=(b||"").trim().toLowerCase();for(var d=a.length,e=0;e<d;e++)if(void 0==c){if((a[e]||"").trim().toLowerCase()==b)return!0}else if((a[e][c]||"").trim().toLowerCase()==b)return!0}return!1},strToJSON:function(a){if(a){if(""==a)return{};try{return JSON.parse(a)}catch(b){return $F.err("strToJSON","String To JSON Failed",b),{}}}else return{}},JSONToStr:function(a){if(void 0==a)return"";try{return JSON.stringify(a)}catch(b){return $F.err("JSONToStr","JSON To String Failed",b),""}},arrayToString:function(a,b,c,d){if(f.isArray(a)){var e="";void 0==c&&(c="");if(-1==b)if(1==d)for(d=a.length-1;-1<d;d--)e=""==e?a[d]:e+(c+a[d]);else{var g=a.length;for(d=0;d<g;d++)e=""==e?a[d]:e+(c+a[d])}else if(1==d)for(d=a.length-1;-1<d;d--)e=""==e?a[d][b]:e+(c+a[d][b]);else for(g=a.length,d=0;d<g;d++)e=""==e?a[d][b]:e+(c+a[d][b]);return e}return""},strToArray:function(a,b){return a.split(b)},findcount:function(a,b){return $F.isString(a)?a.split(b).length:0},lastofstrbefore:function(a,b){a=$F.isString(a)?a:a.toString();b=a.lastIndexOf(b);return-1<b?0==b?"":a.substring(0,b):""},lastofstrafter:function(a,b){a=$F.isString(a)?a:a.toString();var c=a.lastIndexOf(b);return-1<c?0==c?"":a.substring(c+b.length):""},replaceDomAttr:function(a){return a?a.replace("'","\x26apos;").replace('"',"\x26quot;"):""},newIdCustLen:function(a){for(var b="";a--;)b+="abcdefghijklnmopqrstuvwxyz1234567890".substr(parseInt(36*Math.random()),1);return b},buildSelectItemSql:function(a,b,c,d){d="\x3coption value style\x3d'text-align: center;color: #cacaca;'\x3e"+(d?d:"")+"\x3c/option\x3e";if(a){b=$F.getFIndex(a,b);c=$F.getFIndex(a,c);a=a.fields;for(var e=a.length,g=0;g<e;g++)d+="\x3coption value\x3d'"+a[g][b]+"'\x3e"+a[g][c]+"\x3c/option\x3e"}return d},buildSelectItemArr:function(a,b,c,d){d="\x3coption value style\x3d'text-align: center;color: #cacaca;'\x3e"+(d?d:"")+"\x3c/option\x3e";if(a&&f.isArray(a))for(var e=a.length,g=0;g<e;g++)d+="\x3coption value\x3d'"+a[g][b]+"'\x3e"+a[g][c]+"\x3c/option\x3e";return d},setMapValue:function(a,b,c,d){void 0==a[b]&&(a[b]={});void 0!=c&&(a[b][c]=d)},setArrayValue:function(a,b,c){void 0==a[b]&&(a[b]=[]);void 0!=c&&a[b].push(c)},JSONShow:function(a){"string"!=typeof a&&(a=JSON.stringify(a,void 0,2));a=a.replace(/&/g,"\x26").replace(/</g,"\x3c").replace(/>/g,"\x3e");return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(a){var b="jsonnumber";/^"/.test(a)?b=/:$/.test(a)?"jsonkey":"jsonstring":/true|false/.test(a)?b="jsonboolean":/null/.test(a)&&(b="jsonnull");return'\x3cspan class\x3d"'+b+'"\x3e'+a+"\x3c/span\x3e"})},oneUserInfo:function(a){var b=[];b.push($F.doSysDo2_Sql("System.User.OneUser",0,0,{C1:a}));var c;$F.doSysDo2("",b,function(b){0<b.code?b.value[0]?0<b.value[0].count?c=b.value[0].fields[0]:$F.err("oneUserInfo","\u7528\u6237\u4e0d\u5b58\u5728,userId:"+a):$F.err("oneUserInfo","\u7528\u6237\u4e0d\u5b58\u5728,userId:"+a):$F.err("oneUserInfo","\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25 msg:"+b.message+",userId:"+a)},function(b){$F.err("oneUserInfo","\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25,userId:"+a,b)},void 0,!1);return c},strToInt:function(a){try{return parseInt(a)}catch(b){return 0}},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},lockRec:function(a,b){var c={code:-1,message:"unknow"};a={name:"System.Locked.do",token:$T.runkey,mainId:a};b&&(a.subId=b);$F.post("genObjN",{async:!1,data:a,f:function(a){c={code:-1,message:a}},s:function(a){c=a}});return c},unlockRec:function(a,b){var c={code:-1,message:"unknow"};a={name:"System.Locked.unDo",token:$T.runkey,mainId:a};b&&(a.subId=b);$F.post("genObjN",{async:!1,data:a,f:function(a){c={code:-1,message:a}},s:function(a){c=a}});return c},checklockRec:function(a,b){var c={code:-1,message:"unknow"};a={name:"System.Locked.check",token:$T.runkey,mainId:a};b&&(a.subId=b);$F.post("genObjN",{async:!1,data:a,f:function(a){c={code:-1,message:a}},s:function(a){c=a}});return c},addId:0,getNewId:function(){return this.addId++},isMap:function(a){return f.isPlainObject(a)?!0:!1},isEmptyMap:function(a){if(f.isPlainObject(a)){var b=!0;f.each(a,function(a,d){return b=!1});return b}return!0},strMapToArray:function(a,b,c){try{var d=JSON.parse(a);return this.mapToArray(d,b,c)}catch(e){return $F.log("json","json parse Failed",e),[]}},getArrayOneCol:function(a,b){var c=[];if(f.isArray(a))for(var d=a.length,e=0;e<d;e++)c.push(a[e][b]);return c},mapToArray:function(a,b,c){var d=[];f.each(a,function(a,g){var e=[];e[b]=a;e[c]=g;d.push(e)});return d},arrayToMapStr:function(a,b,c){return JSON.stringify(this.arrayToMap(a,b,c))},arrayToMap:function(a,b,c){var d={};f.each(a,function(a,g){d[g[b]]=g[c]});return d},doOtherClassResultObj:function(a,b,c,d){a={clsName:"ZDyn.threeIF.ThreeIn",threeCls:a};f.extend(a,b);$F.post("genObj",{async:c,data:a,s:function(a){d(1,a)},f:function(){$F.err("doOtherClassResultObj","\u5f02\u5e38\u9519\u8bef",arguments);d(0,"")}})},doOtherClassResultObjSystem:function(a,b,c,d){a={clsName:a};f.extend(a,b);$F.post("genObj",{async:c,data:a,s:function(a){d(1,a)},f:function(){$F.err("doOtherClassResultObjSystem","\u5f02\u5e38\u9519\u8bef",arguments);d(0,"")}})},doSysDo1_Sql:function(a,b){return{sqlId:a,paras:b}},doSysDo1:function(a,b,c,d,e,g){$F.post("sysDo1",{async:void 0==g?!0:g,data:{token:$T.runkey,dbPool:a||"",sqls:b},s:c,f:function(a){f.isFunction(d)?d(a):$F.err("doSysDo1","SQL1 \u6267\u884c\u5931\u8d25"+JSON.stringify(b),a)},a:e})},doSimpleExec:function(a,b,c,d){var e,g;g=f.isFunction(d)?!0:!1;$F.doSysDo1(a,[$F.doSysDo1_Sql(b,c)],function(a){-1<a.code?g?d({code:a.code}):e={code:a.code}:g?d({code:-1,message:a.message}):e={code:-1,message:a.message}},function(a){$F.err("simple","sql Exec Failed",a);g?d({code:-1,message:a.toString()}):e={code:-1,message:a.toString()}},void 0,g);return e},doSimpleSelect:function(a,b,c,d){var e,g;g=f.isFunction(d)?!0:!1;$F.doSysDo2(a,[$F.doSysDo2_Sql(b,0,0,c)],function(a){0<a.code?a.value[0]?-1<a.value[0].count?g?d({code:1,value:a.value[0]}):e={code:1,value:a.value[0]}:g?d({code:-1,message:a.value[0].message}):e={code:-1,message:a.value[0].message}:g?d({code:-1,message:"unknow"}):e={code:-1,message:"unknow"}:g?d({code:-1,message:a.message}):e={code:-1,message:a.message}},function(a){$F.err("simple","sql Select Failed",a);g?d({code:-1,message:a.toString()}):e={code:-1,message:a.toString()}},void 0,g);return e},doSysDo2_Sql:function(a,b,c,d){return{sqlId:a,page:b||0,maxRow:c||0,paras:d}},doSysDo2:function(a,b,c,d,e,g){$F.post("sysDo2",{async:void 0==g?!0:g,data:{token:$T.runkey,dbPool:a||"",type:0,sqls:b},s:c,f:function(a){f.isFunction(d)?d(a):console.error("SQL2 \u6267\u884c\u5931\u8d25"+JSON.stringify(b),a)},a:e})},doSysDo3:function(a,b,c,d,e,g,m){$F.post("sysDo3",{async:void 0==m?!0:m,data:{token:$T.runkey,dbPool:a||"",name:b,paras:c},s:d,f:function(a){f.isFunction(e)?e(a):console.error("\u5b58\u50a8\u8fc7\u7a0b\u6267\u884c\u5931\u8d25"+b+"  "+a.toString(),a)},a:g})},doSysDo4:function(a,b,c,d,e,g){$F.post("sysDo4",{async:void 0==g?!0:g,data:{token:$T.runkey,dbPool:a||"",xml:b},s:c,f:function(a){f.isFunction(d)?d(a):console.error("XML \u63d0\u4ea4\u6267\u884c\u5931\u8d25"+b+a.toString(),a)},a:e})},doSysDo5:function(a,b,c,d,e,g){$F.post("sysDo5",{async:void 0==g?!0:g,data:{token:$T.runkey,dbPool:a||"",sqls:b},s:c,f:function(a){f.isFunction(d)?d(a):console.error("\u8868\u7ed3\u6784\u83b7\u53d6\u5931\u8d25\uff1a"+xmlData+a.toString(),a)},a:e})},doSysDo7:function(a,b,c,d,e,g,m,h,k,l){$F.post("sysDo7",{async:void 0==k?!0:k,data:{token:$T.runkey,dbPool:a||"",sql:{sqlId:b,keyF:c,parentF:d,subNodeKey:l||"",para:e}},s:g,f:function(a){f.isFunction(m)?m(a):console.error("\u6811\u7ed3\u6784 SQL \u6267\u884c\u5931\u8d25"+b+a.toString(),a)},a:h})},doSysDo10:function(a,b,c,d,e,g,m){$F.post("sysDo10",{async:void 0==m?!0:m,data:{token:$T.runkey,dbPool:a||"",database:b||"",user:c||""},s:d,f:function(a){f.isFunction(e)?e(a):console.error("SQL10 \u6267\u884c\u5931\u8d25"+JSON.stringify(sqls),a)},a:g})},getFIndex:function(a,b){if($F.isInt(b))return b;if(a=a.columns){b=b.trim().toUpperCase();var c,d=0;for(c=a.length;d<c;d++)if(a[d].toUpperCase()==b)return d}return-1},treePathSub:function(a,b,c,d,e,g){console.log(b);var m=!1;$F.isArrayAndNEP(b)&&f.each(b,function(b,f){if(f.v[d]==c&&"##Root##"!=f.id)return f.folder||void 0==g?a.push(f.v[e]):a.push(f.v[g]),m=!0,!1;if($F.isArrayAndNEP(f.children)&&$F.treePathSub(a,f.children,c,d,e,g))return"##Root##"!=f.id&&(f.folder||void 0==g?a.push(f.v[e]):a.push(f.v[g])),m=!0,!1});return m},treePath:function(a,b,c,d,e){var g=[];$F.treePathSub(g,a,b,c,d,e);0<g.length&&g.reverse();return g},treeDataMerge:function(a,b,c,d){var e={},g=function(a){f.each(a,function(a,b){e[b.id]=b;b.folder=!0;b.children&&g(b.children)})};g(a.children);if(b&&-1<b.count){var m=$F.getFIndex(b,c),h=$F.getFIndex(b,d);f.each(b.fields,function(a,b){if(a=e[b[m]])void 0==a.children&&(a.children=[]),a.children.push({folder:!1,id:b[h],pId:b[m],v:b})})}},treeDataLoad:function(a,b,c,d,e,g,m,h,k){var l={},p=function(a){f.each(a,function(a,d){l[d.id]=d;b&&(d.name=d.v[b]);c&&(d.folder=!0);d.children&&p(d.children)})};p(a.children);e?g&&m?(a=[],a.push($F.doSysDo2_Sql(e,0,0,{})),$F.doSysDo2(d,a,function(a){if(0<a.code){a=a.value[0];var b=$F.getFIndex(a,g),c=$F.getFIndex(a,m),d=$F.getFIndex(a,h);f.each(a.fields,function(a,e){if(a=l[e[b]])a.children||(a.children=[]),a.children&&a.children.push({folder:!1,id:e[c],name:e[d],pId:e[b],v:e})});f.isFunction(k)&&k(1)}else console.error("\u6811\u672b\u7ea7\u8282\u70b9\u6570\u636e\u52a0\u5f00\u5931\u8d25"),f.isFunction(k)&&k(0)},function(a){f.isFunction(k)&&k(0)})):(console.error("\u672a\u4f20\u5165\u672b\u7ea7\u8282\u70b9KEY"),f.isFunction(k)&&k(0)):f.isFunction(k)&&k(1)},extendByExists:function(){for(var a,b,c=arguments[0]||{},d=1,e=arguments.length;d<e;d++)if(null!=(a=arguments[d]))for(b in a)c.hasOwnProperty(b)&&(c[b]=a[b]);return c},screenMasker:{show:function(a,b){a=f(a);if(0===a.length)alert("\u4e0d\u80fd\u8bbe\u7f6e\u672a\u5b9a\u4e49\u7684\u8282\u70b9\u7ed9ScreenMask");else{var c=f.extend({background:"#aaaaaa",opacity:".3",fade:200,cursor:"auto",clickToHide:!1,fixed:!1,zIndex:1001},b);a.outerWidth();a.outerHeight();f(window).width();f(window).height();b=f("\x3cdiv id\x3d'"+("ui-screenMasker_id_"+(new Date).getTime()+"_R"+Math.floor(999*Math.random()))+"' class\x3d'ui-screenMasker'\x3e\x3c/div\x3e").css({position:"fixed",top:0,left:0,height:"100%",width:"100%",backgroundColor:c.background,opacity:c.opacity,filter:"alpha(opacity\x3d30)","-moz-opacity":".3",cursor:c.cursor,zIndex:c.zIndex}).appendTo(f("body")).after(a);a.data("maskerId",b.attr("id")).data("maskerObj",b);a.css({position:"flex","box-shadow":c.boxShadow,zIndex:c.zIndex});var d=!1,e=function(){if(!d){d=!0;var b=(f(window).width()-a.outerWidth())/2,c=(f(window).height()-a.outerHeight())/2;a.css({left:0>b?0:b+"px",top:0>c?0:c+"px"});resizeing=!1}};a.show();e();if(c.fixed)a.on("resize",e);void 0!==c.fade&&0<c.fade?(a.hide(),a.fadeIn(c.fade,function(){f.isFunction(c.complete)&&c.complete();f.isFunction(c.onOpen)&&c.onOpen.call(a)})):(f.isFunction(c.complete)&&c.complete(),f.isFunction(c.onOpen)&&c.onOpen.call(a));c.onClose&&a.data("afterClose",c.onClose);if(c.clickToHide)b.on("click",function(b){$F.screenMasker.hide(a)})}},hide:function(a,b){a=f(a);var c=a.data("maskerId"),d=f("#"+c);0==d.length&&console.error("ScreenMasker\u9057\u5931\uff0cGUID\x3d"+c);b?a.fadeOut(b,function(){d.remove();f.isFunction(a.data("afterClose"))&&a.data("afterClose").call(a)}):(a.hide(),d.remove(),f.isFunction(a.data("afterClose"))&&a.data("afterClose").call(a))}},post:function(a,b){1==$T.transFlag?this.postCur("transData?url\x3d"+encodeURIComponent($T.dataUrl+"/"+a),b):this.postCur($T.dataUrl+"/"+a,b)},postCur:function(a,b){f.ajax({type:"POST",url:a,data:JSON.stringify(b.data),dataType:"json",contentType:"application/json;charset\x3dUTF-8",cache:!1,async:b.async}).fail(function(a,d,e){"parsererror"==d.toString()?console.error("\u8fd4\u56de\u975e\u6cd5JSON\u6570\u636e",a):console.error(d);f.isFunction(b.f)&&b.f(a,b)}).done(function(a){-10001==a.code?$T.mb?alert("\u65e0\u6548\u767b\u5f55"):(alert("\u767b\u5f55\u5931\u6548\uff0c\u5373\u5c06\u91cd\u65b0\u767b\u5f55"),localStorage.setItem("logKey",""),window.location.reload()):f.isFunction(b.s)&&b.s(a,b)}).always(function(){f.isFunction(b.a)&&b.a(b)})},randomStr:function(a){a=a||32;for(var b="",c=0;c<a;c++)b+="1234567890abcdefghijklnmopqrstuvwxyz".charAt(Math.floor(36*Math.random()));return b},isNull:function(a){return void 0==a||null==a},strToInt:function(a){return Math.floor(a)},parseDate:function(a){if(""==a)return new Date;if("date"==f.type(a))return a;if("number"==f.type(a))return new Date(a);if("string"!==f.type(a))return new Date;var b=a.split(" ");2>b.length?(b=b[0].split(":"),b=1<b.length?2==b.length?"H:i":"H:i:s":"Y-m-d"):(b=a.trim().split(":"),b=1<b.length?2==b.length?"Y-m-d H:i":a.match(/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{2}):(\d{2}).(\d{1,3})$/)?Date.patterns.ISO8601LongestPattern:Date.patterns.ISO8601LongPattern:"Y-m-d H");return Date.parseDate(a,b)},replaceVarList:function(a,b){var c=a.match(/\$\{([\u4e00-\u9fa5 | \w | \.]+)\}/gi);if(c)for(var d=0;d<c.length;d++)a=a.replace(c[d],function(){var a=/\$\{([\u4e00-\u9fa5 | \w | \.]+)\}/gi.exec(c[d]);return f.isFunction(b)?b(a[1]):b&&b.hasOwnerProperty(a[1])?b[a[1]]:c[d]});return a},xmlEncode:function(a){if(void 0==a||null==a)return"";a=(a+"").replace("\x26","\x26amp;");a=a.replace("\x3c","\x26lt;");a=a.replace("\x3e","\x26gt;");a=a.replace('"',"\x26quot;");a=a.replace("'","\x26apos;");return a=a.replace(/\x0D/g,"\x26#x000D;")},xmlDecode:function(a){if(void 0==a||null==a)return"";a=(a+"").replace("\x26amp;","\x26");a=a.replace("\x26lt;","\x3c");a=a.replace("\x26gt;","\x3e");a=a.replace("\x26quot;",'"');a=a.replace("\x26apos;","'");return a=a.replace("\x26#x000D;","\n")},round:function(a,b){b=b||0;return 0<b?(b*=10,Math.round(a*b)/b):0>b?(b=10*Math.abs(b),Math.round(a/b)*b):Math.round(a)},fieldTypeStringToBoundType:function(a){return"I"==a?6:"N"==a?1:"D"==a?2:0},openWindowsNewOtherURL:function(a,b,c){try{var d=window.open(a,b,c);d?d.focus():$F.err("\u786e\u8ba4\u5f39\u51fa\u7a97\u53e3\u662f\u5426\u88ab\u62e6\u622a");return 1}catch(e){this.err("openWindowsNewOtherURL"," Open IE Failed:"+e.message)}return-1},strToInt:function(a){try{return a=parseInt(a),isNaN(a)?0:a}catch(b){return 0}},strToFloat:function(a){try{return a=parseFloat(a),isNaN(a)?0:a}catch(b){return 0}},isDate:function(a){if(null==a||void 0==a)return!1;var b=/^((((1[6-9]|[2-9]\d)\d{2})-(0?[13578]|1[02])-(0?[1-9]|[12]\d|3[01]))|(((1[6-9]|[2-9]\d)\d{2})-(0?[13456789]|1[012])-(0?[1-9]|[12]\d|30))|(((1[6-9]|[2-9]\d)\d{2})-0?2-(0?[1-9]|1\d|2[0-8]))|(((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))-0?2-29-))$/;return b.test(a)?!0:10>a.length?!1:b.test(a.substring(0,10))&&this.isTime(a.substring(10).trim())?!0:!1},now:function(){return(new Date).format("yyyy-MM-dd hh:mm:ss")},isTime:function(a){try{a=a.trim();var b;if(0<a.indexOf(":"))b=a.split(":");else return!1;if(2<b.length&&3>b[0].length)return!0}catch(c){}return!1},newGuid:function(){return(new Guid).toString()},md5:function(a){return(new MD5(a)).toString()},buildSameString:function(a,b){for(var c="",d=0;d<b;d++)c+=a;return c},numToFixStr:function(a){if(void 0==a||""==a)return"";a=a.toString().toLowerCase();var b=a.indexOf("e");if(-1<b){var c=a.substr(b+1).trim(),d=c.substr(0,1);a=a.substr(0,b).trim();b=a.indexOf(".");if("-"==d){c=this.strToInt(c.substr(1));if(-1==b){if(a.length>c)return b=a.length-c,a.substr(0,b)+"."+a.substr(b);b=c-a.length;return 0==b?"0."+a:"0."+this.buildSameString("0",b)+a}return b-1>c?a.substr(0,b-c)+"."+a.substr(b-c).replace(".",""):"0."+this.buildSameString("0",c-b)+a.substr(0,1)+a.substr(2)}if("+"==d)return c=this.strToInt(c.substr(1)),-1==b?a+this.buildSameString("0",c):a.length-b-1>=c?a.length-b-1==c?a.replace(".",""):a.substr(0,b+c+1).replace(".","")+"."+a.substr(b+c+1):a.replace(".","")+this.buildSameString("0",c-(a.length-b-1));c=this.strToInt(c);return-1==b?a+this.buildSameString("0",c):a.length-b-1>=c?a.length-b-1==c?a.replace(".",""):a.substr(0,b+c+1).replace(".","")+"."+a.substr(b+c+1):a.replace(".","")+this.buildSameString("0",c-(a.length-b-1))}return a},getAgeFromIdCard:function(a){if(void 0==a||""==a)return-1;var b=new Date,c,d;if(15==a.length)return c=1900+this.stringToInt(a.substr(6,2)),d=this.stringToInt(a.substr(8,2))-1,a=this.stringToInt(a.substr(10,2)),b.getMonth()<d||b.getMonth()==d&&b.getDay()<a?b.getFullYear()-c-1:b.getFullYear()-c;if(18==a.length)return c=this.stringToInt(a.substr(6,4)),d=this.stringToInt(a.substr(10,2))-1,a=this.stringToInt(a.substr(12,2)),b.getMonth()<d||b.getMonth()==d&&b.getDay()<a?b.getFullYear()-c-1:b.getFullYear()-c;this.log("getagefromidcard","invalid id card for getagefromidcard");return-1},getBirthdayFromIdCard:function(a){var b=new Date,c,d;b.setHours(0,0,0,0);if(15==a.length)c=1900+this.strToInt(a.substr(6,2)),d=this.strToInt(a.substr(8,2))-1,a=this.strToInt(a.substr(10,2)),b.setFullYear(c,d,a);else if(18==a.length)c=this.strToInt(a.substr(6,4)),d=this.strToInt(a.substr(10,2))-1,a=this.strToInt(a.substr(12,2)),b.setFullYear(c,d,a);else return this.log("getbirthdayfromidcard","invalid id card for getbirthdayfromidcard"),"";return b.format()},getGenderFromIdCard:function(a){if(15==a.length)a=this.strToInt(a.substr(14,1));else if(18==a.length)a=this.strToInt(a.substr(14,3));else return this.log("getgenderfromidcard","invalid id card for getgenderfromidcard"),"";return a%2},isValidIdCard:function(a){a=a.trim();if(""==a)return-1;if(15==a.length)return(0==(this.strToInt(a.substr(6,2))+1900)%4||0==(this.strToInt(a.substr(6,2))+1900)%100&&0==(this.strToInt(a.substr(6,2))+1900)%4?/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/).test(a)?1:-2;if(18==a.length){if(/^[1-9][0-7]\d{4}((([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229))\d{3}(\d|X|x)?$/.test(a)){var b=7*(this.strToInt(a.charAt(0))+this.strToInt(a.charAt(10)))+9*(this.strToInt(a.charAt(1))+this.strToInt(a.charAt(11)))+10*(this.strToInt(a.charAt(2))+this.strToInt(a.charAt(12)))+5*(this.strToInt(a.charAt(3))+this.strToInt(a.charAt(13)))+8*(this.strToInt(a.charAt(4))+this.strToInt(a.charAt(14)))+4*(this.strToInt(a.charAt(5))+this.strToInt(a.charAt(15)))+2*(this.strToInt(a.charAt(6))+this.strToInt(a.charAt(16)))+1*this.strToInt(a.charAt(7))+6*this.strToInt(a.charAt(8))+3*this.strToInt(a.charAt(9));return"10X98765432".substr(b%11,1)==a.charAt(17).toUpperCase()?1:-3}return-2}return-1},isBin:function(a){return/^[0-1]+$/.test(a)},isMobile:function(a){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(a)},isNumber:function(a){return/^[0-9]+$/.test(a)},isInt:function(a){return/^[-+]?[0-9]+$/.test(a)},isFloat:function(a){"string"==typeof a&&(a=a.replace(/\s+/g,"").replace(",",""));return("number"===typeof a||"string"===typeof a&&""!==a)&&!isNaN(Number(a))},isMoney:function(a){var b=/^\$?[-+]?\$?[0-9]*[\.]?[0-9]+$/i;"string"===typeof a&&(a=a.replace(/,/g,""));return"object"===typeof a||""===a?!1:b.test(a)},isHex:function(a){return/^[a-fA-F0-9]+$/.test(a)},isAlphaChar:function(a){return/^[a-zA-Z0-9]+$/.test(a)},isAlphaNumeric:function(a){return/^[a-zA-Z0-9_-]+$/.test(a)},isEmail:function(a){return/^[a-zA-Z0-9._%-+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)},len:function(a){return a?(a=a.toString(),a.length):0},utf8_encode:function(a){a=String(a).replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},base64encode:function(a){var b="",c,d,e,g,f,h,k=0;for(a=$F.utf8_encode(a);k<a.length;)c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),g=c>>2,c=(c&3)<<4|d>>4,f=(d&15)<<2|e>>6,h=e&63,isNaN(d)?f=h=64:isNaN(e)&&(h=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(h);return b},utf8_decode:function(a){for(var b="",c=0,d,e,g;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),g=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|g&63),c+=3);return b},base64decode:function(a){var b="",c,d,e,g,f,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<a.length;)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|g>>2,e=(g&3)<<6|f,b+=String.fromCharCode(c),64!==g&&(b+=String.fromCharCode(d)),64!==f&&(b+=String.fromCharCode(e));return $F.utf8_decode(b)},encodeTags:function(a){if(null==a)return a;switch(typeof a){case "string":a=String(a).replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;");break;case "object":if(Array.isArray(a)){a=f.extend(!0,[],a);for(var b=0;b<a.length;b++)a[b]=this.encodeTags(a[b])}else for(b in a=f.extend(!0,{},a),a)a[b]=this.encodeTags(a[b])}return a},decodeTags:function(a){if(null==a)return a;switch(typeof a){case "string":a=String(a).replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"').replace(/&amp;/g,"\x26");break;case "object":if(Array.isArray(a)){a=f.extend(!0,[],a);for(var b=0;b<a.length;b++)a[b]=this.decodeTags(a[b])}else for(b in a=f.extend(!0,{},a),a)a[b]=this.decodeTags(a[b])}return a},stripTags:function(a){if(null==a)return a;switch(typeof a){case "string":a=String(a).replace(/(<([^>]+)>)/ig,"");break;case "object":if(Array.isArray(a)){a=f.extend(!0,[],a);for(var b=0;b<a.length;b++)a[b]=this.stripTags(a[b])}else for(b in a=f.extend(!0,{},a),a)a[b]=this.stripTags(a[b])}return a},htmlEncode:function(a){return void 0==a?"":"string"!==f.type(a)?a:a.replace(/&/g,"\x26amp;").replace(/ /g,"\x26nbsp;").replace(/\t/g,"\x26nbsp;\x26nbsp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/\n/g,"\x3cbr /\x3e").replace(/"/g,"\x26quot;")},htmlDecode:function(a){return void 0==a?"":"string"!==f.type(a)?a:a.replace(/&#39;/g,"'").replace(/<br\s*(\/)?\s*>/g,"\n").replace(/&nbsp;/g," ").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&quot;/g,'"').replace(/&amp;/g,"\x26")},slide:function(a,b){var c=f(a),d=f.extend({duration:150,hideAuto:!1,blockSelf:!0},b);a=function(){d.blockSelf&&void 0==c.data("_spry_click")&&(c.on("click",function(a){c.data("_click_byself",!0)}),c.data("_spry_click",!0));var a=function(){f(document).one("click",function(b){if(c.data("_click_byself"))c.removeData("_click_byself"),a();else if("up"==d.direction){if(c.hide().removeClass("_spry_slided").removeData("_slide_options"),f.isFunction(d.onClose))d.onClose(c)}else c.slideUp(d.duration,function(){if(f.isFunction(d.onClose))d.onClose(c)}).removeClass("_spry_slided").removeData("_slide_options")})};a();d.hideAuto&&void 0==c.data("_spry_hover")&&(c.hover(function(){},function(){f(document).click()}),c.data("_spry_hover",!0));c.data("_slide_options",d);f.isFunction(d.complete)&&d.complete()};return c.hasClass("_spry_slided")?"up"==d.direction?c.hide().removeClass("_spry_slided"):c.slideUp({duration:d.duration}).removeClass("_spry_slided"):"up"==d.direction?c.show("slide",{direction:"down",duration:d.duration,complete:a}).addClass("_spry_slided"):c.slideDown({duration:d.duration,complete:a}).addClass("_spry_slided")},onceShowDiv:function(a,b){a.show();f(document).one("click",function(c){b?b():a.hide()})},createMsgDialogMoblie:function(a,b){var c=f("\x3cdiv class\x3d'mobile_dialog unselectable'/\x3e").appendTo("body"),d=function(a){$F.screenMasker.hide(c);c.remove();a.stopPropagation();f("body").unbind("keydown",e)},e=function(a){27==a.keyCode&&d(a)};a=f("\x3cdiv class\x3d'title'\x3e"+a+"\x3c/div\x3e").appendTo(c);f("\x3cdiv class\x3d'content'\x3e\x3c/div\x3e").appendTo(c).html(b);a=f("\x3cdiv class\x3d'btnbar'\x3e\x3c/div\x3e").appendTo(c);f('\x3ca class\x3d"icon-ok mobile js_ok" \x3e\u786e\u5b9a\x3c/a\x3e').appendTo(a).on("click",d);f("body").bind("keydown",e);return c},createMsgDialog:function(a,b,c){var d=f("\x3cdiv class\x3d'sys_dialog'/\x3e").appendTo("body"),e=function(a){$F.screenMasker.hide(d);d.remove();a.stopPropagation();f("body").unbind("keydown",g)},g=function(a){27==a.keyCode&&e(a)};a=f("\x3cdiv class\x3d'title unselectable'\x3e"+a+"\x3c/div\x3e").appendTo(d);f("\x3ca href\x3d'#' class\x3d'close_icon'\x3e\x3c/a\x3e").appendTo(d).on("click",e);b=f("\x3cdiv class\x3d'content'\x3e\x3c/div\x3e").appendTo(d).html(b);0==c?f("\x3ci class\x3d'icon37_msg info'\x3e\x3c/i\x3e").appendTo(b):1==c?f("\x3ci class\x3d'icon37_msg warn'\x3e\x3c/i\x3e").appendTo(b):2==c?f("\x3ci class\x3d'icon37_msg error'\x3e\x3c/i\x3e").appendTo(b):f('\x3cspan class\x3d"fa fa-question fa-3x confirm"\x3e\x3c/span\x3e').appendTo(b);c=f("\x3cdiv class\x3d'btnbar'\x3e\x3c/div\x3e").appendTo(d);f('\x3cbutton class\x3d"fa fa-check unselectable '+($F.isPCRunTime()?"mobile":"chrome")+' js_ok"\x3e\u786e\u5b9a\x3c/button\x3e').appendTo(c).on("click",e);f("body").bind("keydown",g);return d.draggable?d.draggable({handle:a}):d},alert:function(a,b){var c;c=$F.isPCRunTime()?$F.createMsgDialogMoblie($T.title||"webCell",a):$F.createMsgDialog($T.title||"webCell",a,2);c.data("afterClose",b);$F.screenMasker.show(c,{complete:function(){f(".js_ok",c).focus()}});return this},info:function(a){var b;b=$F.isPCRunTime()?$F.createMsgDialogMoblie($T.title||"webCell",a):$F.createMsgDialog($T.title||"webCell",a,0);$F.screenMasker.show(b,{complete:function(){f(".js_ok",b).focus()}});return this},warn:function(a){var b;b=$F.isPCRunTime()?$F.createMsgDialogMoblie($T.title||"webCell",a):$F.createMsgDialog($T.title||"webCell",a,1);$F.screenMasker.show(b,{complete:function(){f(".js_ok",b).focus()}});return this},confirm:function(a,b,c,d){var e;e=$F.isPCRunTime()?$F.createMsgDialogMoblie($T.title||"webCell",a):$F.createMsgDialog($T.title||"webCell",a,3);a=f(".btnbar",e).addClass("confirm");$F.isPCRunTime()?(f("\x3ea.js_ok",a).off("click").on("click",function(a){$F.screenMasker.hide(e);e.remove();f.isFunction(b)&&b(e)}),f('\x3ca class\x3d"fa fa-remove mobile js_cancel" href\x3d"javascript:;"\x3e\u53d6\u6d88\x3c/a\x3e').appendTo(a).click(function(a){$F.screenMasker.hide(e);e.remove();f.isFunction(c)&&c(e)})):(f("\x3ebutton.js_ok",a).off("click").on("click",function(a){$F.screenMasker.hide(e);e.remove();f.isFunction(b)&&b(e)}),f('\x3cbutton class\x3d"fa fa-remove '+($F.isPCRunTime()?"mobile":"chrome")+' js_cancel"\x3e\u53d6\u6d88\x3c/button\x3e').appendTo(a).click(function(a){$F.screenMasker.hide(e);e.remove();f.isFunction(c)&&c(e)}));d&&d.okBtn&&f("\x3ebutton.js_ok",a).text(d.okBtn);d&&d.cancelBtn&&f("\x3ebutton.js_cancel",a).text(d.cancelBtn);$F.screenMasker.show(e,{complete:function(){f(".js_ok",e).focus()}})},dialogOpen:function(a,b){if(void 0!=a){if(a.is(":visible"))return this.err("Function - dialogOpen","\u91cd\u590d\u6253\u5f00\u5bf9\u8bdd\u6846");b=f.extend({escapable:!0,masker:{},removable:!1,onSubmit:!1,onCancel:function(a){a()},onClose:!1,onOpen:!1},b);var c=this;a.data("_internal_function_onClose",b.onClose);var d=f("\x3eform",a);if(0<d.length)d.off("submit").on("submit",function(d){d.preventDefault();f.isFunction(b.onSubmit)&&b.onSubmit.call(a,function(){c.dialogClose(a);b.removable&&a.remove()});return!1});else d=a.data("submitFunction"),f.isFunction(d)&&(f("button.js_submit",a).off("click",d),a.removeData("submitFunction")),f.isFunction(b.onSubmit)&&(d=function(){b.onSubmit.call(a,function(){c.dialogClose(a);b.removable&&a.remove()})},a.data("submitFunction",d),f("button.js_submit",a).on("click",d));if(f.isFunction(b.onCancel))f("a.close_tip_icon",a).off("click").on("click",function(){b.onCancel.call(a,function(){c.dialogClose(a);b.removable&&a.remove()})}),f("button.js_close",a).off("click").on("click",function(){b.onCancel.call(a,function(){c.dialogClose(a);b.removable&&a.remove()})});else f("a.close_tip_icon",a).off("click").on("click",function(){c.dialogClose(a);b.removable&&a.remove()});a.attr({tabIndex:-1}).css({boxShadow:"1px 3px 10px #666"});if(b.escapable)a.off("keydown").on("keydown",function(b){27==b.keyCode&&c.dialogClose(a)});a.draggable&&(a=a.draggable({handle:".handle",iframeFix:!0}));$F.screenMasker.show(a,{onOpen:b.onOpen})}},dialogClose:function(a){a=f(a);f("body").unbind("keydown",a.data("_internal_function_onEscape"));$F.screenMasker.hide(a);var b=a.data("_internal_function_onClose");f.isFunction(b)&&b.call(a)},busyShow:function(a,b,c){c=f.extend({background:"#FFF",border:"1px solid #999",radius:"0.5em",padding:"8px 8px 5px",fontSize:"12pt",fontFamily:"\u5fae\u8f6f\u96c5\u9ed1",color:"#666",boxShadow:"3px 3px 8px 1px rgba(0,0,0,0.5)",opacity:0,cursor:"auto",fade:0},c);var d=f("#ui-busybox");0==d.length?(d=f('\x3cdiv class\x3d"ui-busybox-body"\x3e\x3ci class\x3d"fa fa-spinner fa-pulse fa-2x'+(a?" pull-left":"")+'"\x3e\x3c/i\x3e\x3c/div\x3e').css({padding:c.padding,"font-size":c.fontSize,"font-family":c.fontFamily,color:c.color}).append('\x3cspan class\x3d"ui-busybox-message" style\x3d"height:32px; line-height:32px;"\x3e'+a+"\x3c/span\x3e"),d=f('\x3cdiv id\x3d"ui-busybox"\x3e\x3c/div\x3e').css({position:"fixed",top:0,padding:0,background:c.background,border:c.border,"border-radius":c.radius,display:"none"}).append(d).appendTo("body")):f(".ui-busybox-message",d).empty().html(a);a=d.data("_queue");a||(a=[],d.data("_queue",a));a.push(b);1==a.length&&(b=f("\x3cdiv class\x3d'ui-screenMasker'\x3e\x3c/div\x3e").css({position:"fixed",top:0,left:0,height:"100%",width:"100%",backgroundColor:c.background,opacity:c.opacity,filter:"alpha(opacity\x3d30)","-moz-opacity":".3",cursor:c.cursor,zIndex:100002}).appendTo(f("body")).after(d),d.css({position:"flex","box-shadow":c.boxShadow,zIndex:100003}).data("ui-masker",b),d.show(),c=(f(window).width()-d.outerWidth())/2,b=(f(window).height()-d.outerHeight())/2,d.css({left:0>c?0:c+"px",top:0>b?0:b+"px"}),resizeing=!1)},busyTitle:function(a,b){f("#ui-busybox .ui-busybox-message").html(a)},busyHide:function(a){var b=f("#ui-busybox"),c=b.data("_queue");c?(a=c.indexOf(a),0<=a?c.splice(a,1):console.error("can not find id at ui-busybox"),b.data("_queue",c),0==c.length&&(b.data("ui-masker").remove(),b.empty().remove())):console.error("lost queue at ui-busybox")},findvar:function(a,b){var c=a.match(/\$\{([\u4e00-\u9fa5 | \w | \. | @]+)\}/gi),d,e;if(c)for(var g=0;g<c.length;g++)a=a.replace(c[g],function(){d=/\$\{([\u4e00-\u9fa5 | \w | \. | @]+)\}/gi.exec(c[g]);return f.isFunction(b)?(e=b(d[1]),void 0==e?c[g]:e):b&&b.hasOwnerProperty(d[1])?b[d[1]]:c[g]});return a},makeNumberInput:function(a,b,c){var d=parseFloat(a.val());isNaN(d)&&b&&a.val("0");a.data("utils_input_format_number")||(a.data("utils_input_format_number",!0),a.t_value=a.o_value=a.val(),a.keypress(function(b){a[0].value.match(/^[\+\-]?\d*?\.?\d*?$/)?a.t_value=a[0].value:a[0].value=a.t_value;a[0].value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/)&&(a.o_value=a[0].value)}).keyup(function(b){a[0].value.match(/^[\+\-]?\d*?\.?\d*?$/)?a.t_value=a[0].value:a[0].value=a.t_value;a[0].value.match(/^(?:[\+\-]?\d+(?:\.\d+)?)?$/)&&(a.o_value=a[0].value)}).blur(function(){a[0].value.match(/^(?:[\+\-]?\d+(?:\.\d+)?|\.\d*?)?$/)?(a[0].value.match(/^\.\d+$/)&&(a[0].value=0+a[0].value),a[0].value.match(/^\.$/)&&(a[0].value=0),a.o_value=a[0].value):a[0].value=a.o_value;""!=a[0].value?a[0].value=parseFloat(a[0].value):b&&(a[0].value=0);if(c){a.attr("real_data",a[0].value);var d=$F.formatNumber(a[0].value,c);a.val(d)}}).focus(function(){if(c){var b=a.attr("real_data");void 0!==b&&a.val(b)}}),c&&(a.val=function(c){if(void 0==c)return a.attr("real_data");a[0].value=0!=c||b?c:""}))},formatNumber:function(a,b){if(void 0===a)return"";a instanceof String&&(a=parseFloat(a));var c=!1;0>a&&(c=!0,a*=-1);var d=b.match(/\[(.+)\]/),d=d?d[1]:"",e=b.charAt(b.length-1);"%"==e&&(b=b.substring(0,b.length-1),a=100*parseFloat(a));var g=a.toString();""===g&&(g="0");var f,h,k;/\./g.test(b)?(h=b.split(".")[0],k=b.split(".")[1]):(h=b,k=null);/\./g.test(g)?null!=k?(g=Math.round(parseFloat("0."+g.split(".")[1])*Math.pow(10,k.length))/Math.pow(10,k.length),a=(Math.floor(a)+Math.floor(g)).toString(),f=/\./g.test(g.toString())?g.toString().split(".")[1]:"0"):(a=Math.round(a).toString(),f="0"):(a=g,f="0");if(null!=h){var g=h.match(/0*$/)[0].length,l=null;/,/g.test(h)&&(l=h.match(/,[^,]*/)[0].length-1);h=new RegExp("(\\d{"+l+"})","g");a.length<g&&(a=Array(g+1).join("0")+a,a=a.substr(a.length-g,g));a=a.substr(0,a.length%l)+a.substring(a.length%l).replace(h,(null!=l?",":"")+"$1");a=a.replace(/^,/,"")}if(null!=k)g=k.match(/^0*/)[0].length,f.length<g?(h=f+Array(g+1).join("0"),b=h.substring(0,g),k=h.substring(g,k.length),h=b+k.replace(/0*$/,"")):h=f.substring(0,k.length),f=h;else if(""!=b||""==b&&"0"==f)f="";c&&(d="-"+d);return d+a+(""==f?"":"."+f)+("%"==e?"%":"")},logGroup:function(a,b){console.group("["+a+"] "+b)},logGroupEnd:function(a,b,c){void 0!=a&&this.log(a,b,c);console.groupEnd()},log:function(a,b,c){var d=new Date,e=10>d.getHours()?"0"+d.getHours():d.getHours(),g=10>d.getMinutes()?"0"+d.getMinutes():d.getMinutes(),f=10>d.getSeconds()?"0"+d.getSeconds():d.getSeconds(),d=d.getMilliseconds();void 0!==c?console.log(e+":"+g+":"+f+"."+d+"["+a+"] "+b,c):console.log(e+":"+g+":"+f+"."+d+"["+a+"] "+b)},err:function(){var a="ZDynWeb",b="",c;c=new Date;var d=10>c.getHours()?"0"+c.getHours():c.getHours(),e=10>c.getMinutes()?"0"+c.getMinutes():c.getMinutes(),g=10>c.getSeconds()?"0"+c.getSeconds():c.getSeconds(),f=c.getMilliseconds();0!=arguments.length&&(1==arguments.length?c=arguments[0]:2==arguments.length?(a=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1],c=arguments[2]),console.error(d+":"+e+":"+g+"."+f+"["+a+"] "+b,c))},getOneArrEditRs:function(a,b,c,d){var e=a.length;if(1==b)for(b=0;b<e;b++){var g=a[b];d.push(g.editFlag);c.push(g)}else for(b=0;b<e;b++)if(g=a[b],1==g.editFlag||2==g.editFlag||3==g.editFlag)d.push(g.editFlag),c.push(g)},getGridEditRows:function(a,b,c){var d=[],e=[],g=this;$F.isArrayAndNEP(a)&&g.getOneArrEditRs(a,b,d,e);!0===c&&f.each(a.mapSubList,function(a,c){$F.isArrayAndNEP(c)&&g.getOneArrEditRs(c,b,d,e)});return{d:d,f:e}},getFieldTypeToBoundType:function(a){switch(a){case "I":return 6;case "N":return 1;case "D":return 2;case "SS":return 4}return 0}};MD5=function(a){this.dataStr=a};MD5.prototype={toString:function(){return this.__pj_crypt_hex_md5(this.dataStr)},__pj_crypt_hex_md5:function(a){return this.__pj_crypt_rstr2hex(this.__pj_crypt_rstr_md5(this.__pj_crypt_str2rstr_utf8(a)))},__pj_crypt_b64_md5:function(a){return this.__pj_crypt_rstr2b64(this.__pj_crypt_rstr_md5(this.__pj_crypt_str2rstr_utf8(a)))},__pj_crypt_any_md5:function(a,b){return this.__pj_crypt_rstr2any(this.__pj_crypt_rstr_md5(this.__pj_crypt_str2rstr_utf8(a)),b)},__pj_crypt_hex_hmac_md5:function(a,b){return this.__pj_crypt_rstr2hex(this.__pj_crypt_rstr_hmac_md5(this.__pj_crypt_str2rstr_utf8(a),this.__pj_crypt_str2rstr_utf8(b)))},__pj_crypt_b64_hmac_md5:function(a,b){return this.__pj_crypt_rstr2b64(this.__pj_crypt_rstr_hmac_md5(this.__pj_crypt_str2rstr_utf8(a),this.__pj_crypt_str2rstr_utf8(b)))},__pj_crypt_any_hmac_md5:function(a,b,c){return this.__pj_crypt_rstr2any(this.__pj_crypt_rstr_hmac_md5(this.__pj_crypt_str2rstr_utf8(a),this.__pj_crypt_str2rstr_utf8(b)),c)},__pj_crypt_rstr_md5:function(a){return this.__pj_crypt_binl2rstr(this.__pj_crypt_binl_md5(this.__pj_crypt_rstr2binl(a),8*a.length))},__pj_crypt_rstr_hmac_md5:function(a,b){var c=this.__pj_crypt_rstr2binl(a);16<c.length&&(c=this.__pj_crypt_binl_md5(c,8*a.length));var d=Array(16);a=Array(16);for(var e=0;16>e;e++)d[e]=c[e]^909522486,a[e]=c[e]^1549556828;b=this.__pj_crypt_binl_md5(d.concat(this.__pj_crypt_rstr2binl(b)),512+8*b.length);return this.__pj_crypt_binl2rstr(this.__pj_crypt_binl_md5(a.concat(b),640))},__pj_crypt_rstr2hex:function(a){try{hexcase}catch(g){hexcase=0}for(var b=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",d,e=0;e<a.length;e++)d=a.charCodeAt(e),c+=b.charAt(d>>>4&15)+b.charAt(d&15);return c},__pj_crypt_rstr2b64:function(a){try{b64pad}catch(m){b64pad=""}for(var b="",c=a.length,d=0;d<c;d+=3)for(var e=a.charCodeAt(d)<<16|(d+1<c?a.charCodeAt(d+1)<<8:0)|(d+2<c?a.charCodeAt(d+2):0),g=0;4>g;g++)b=8*d+6*g>8*a.length?b+b64pad:b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-g)&63);return b},__pj_crypt_rstr2any:function(a,b){var c=b.length,d,e,g,f,h,k=Array(Math.ceil(a.length/2));for(d=0;d<k.length;d++)k[d]=a.charCodeAt(2*d)<<8|a.charCodeAt(2*d+1);var l=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2)));a=Array(l);for(e=0;e<l;e++){h=[];for(d=f=0;d<k.length;d++)if(f=(f<<16)+k[d],g=Math.floor(f/c),f-=g*c,0<h.length||0<g)h[h.length]=g;a[e]=f;k=h}c="";for(d=a.length-1;0<=d;d--)c+=b.charAt(a[d]);return c},__pj_crypt_str2rstr_utf8:function(a){for(var b="",c=-1,d,e;++c<a.length;)d=a.charCodeAt(c),e=c+1<a.length?a.charCodeAt(c+1):0,55296<=d&&56319>=d&&56320<=e&&57343>=e&&(d=65536+((d&1023)<<10)+(e&1023),c++),127>=d?b+=String.fromCharCode(d):2047>=d?b+=String.fromCharCode(192|d>>>6&31,128|d&63):65535>=d?b+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(b+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));return b},__pj_crypt_str2rstr_utf16le:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a.charCodeAt(c)&255,a.charCodeAt(c)>>>8&255);return b},__pj_crypt_str2rstr_utf16be:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a.charCodeAt(c)>>>8&255,a.charCodeAt(c)&255);return b},__pj_crypt_rstr2binl:function(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(c=0;c<8*a.length;c+=8)b[c>>5]|=(a.charCodeAt(c/8)&255)<<c%32;return b},__pj_crypt_binl2rstr:function(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b},__pj_crypt_binl_md5:function(a,b){a[b>>5]|=128<<b%32;a[(b+64>>>9<<4)+14]=b;b=1732584193;for(var c=-271733879,d=-1732584194,e=271733878,g=0;g<a.length;g+=16){var f=b,h=c,k=d,l=e;b=this.__pj_crypt_md5_ff(b,c,d,e,a[g+0],7,-680876936);e=this.__pj_crypt_md5_ff(e,b,c,d,a[g+1],12,-389564586);d=this.__pj_crypt_md5_ff(d,e,b,c,a[g+2],17,606105819);c=this.__pj_crypt_md5_ff(c,d,e,b,a[g+3],22,-1044525330);b=this.__pj_crypt_md5_ff(b,c,d,e,a[g+4],7,-176418897);e=this.__pj_crypt_md5_ff(e,b,c,d,a[g+5],12,1200080426);d=this.__pj_crypt_md5_ff(d,e,b,c,a[g+6],17,-1473231341);c=this.__pj_crypt_md5_ff(c,d,e,b,a[g+7],22,-45705983);b=this.__pj_crypt_md5_ff(b,c,d,e,a[g+8],7,1770035416);e=this.__pj_crypt_md5_ff(e,b,c,d,a[g+9],12,-1958414417);d=this.__pj_crypt_md5_ff(d,e,b,c,a[g+10],17,-42063);c=this.__pj_crypt_md5_ff(c,d,e,b,a[g+11],22,-1990404162);b=this.__pj_crypt_md5_ff(b,c,d,e,a[g+12],7,1804603682);e=this.__pj_crypt_md5_ff(e,b,c,d,a[g+13],12,-40341101);d=this.__pj_crypt_md5_ff(d,e,b,c,a[g+14],17,-1502002290);c=this.__pj_crypt_md5_ff(c,d,e,b,a[g+15],22,1236535329);b=this.__pj_crypt_md5_gg(b,c,d,e,a[g+1],5,-165796510);e=this.__pj_crypt_md5_gg(e,b,c,d,a[g+6],9,-1069501632);d=this.__pj_crypt_md5_gg(d,e,b,c,a[g+11],14,643717713);c=this.__pj_crypt_md5_gg(c,d,e,b,a[g+0],20,-373897302);b=this.__pj_crypt_md5_gg(b,c,d,e,a[g+5],5,-701558691);e=this.__pj_crypt_md5_gg(e,b,c,d,a[g+10],9,38016083);d=this.__pj_crypt_md5_gg(d,e,b,c,a[g+15],14,-660478335);c=this.__pj_crypt_md5_gg(c,d,e,b,a[g+4],20,-405537848);b=this.__pj_crypt_md5_gg(b,c,d,e,a[g+9],5,568446438);e=this.__pj_crypt_md5_gg(e,b,c,d,a[g+14],9,-1019803690);d=this.__pj_crypt_md5_gg(d,e,b,c,a[g+3],14,-187363961);c=this.__pj_crypt_md5_gg(c,d,e,b,a[g+8],20,1163531501);b=this.__pj_crypt_md5_gg(b,c,d,e,a[g+13],5,-1444681467);e=this.__pj_crypt_md5_gg(e,b,c,d,a[g+2],9,-51403784);d=this.__pj_crypt_md5_gg(d,e,b,c,a[g+7],14,1735328473);c=this.__pj_crypt_md5_gg(c,d,e,b,a[g+12],20,-1926607734);b=this.__pj_crypt_md5_hh(b,c,d,e,a[g+5],4,-378558);e=this.__pj_crypt_md5_hh(e,b,c,d,a[g+8],11,-2022574463);d=this.__pj_crypt_md5_hh(d,e,b,c,a[g+11],16,1839030562);c=this.__pj_crypt_md5_hh(c,d,e,b,a[g+14],23,-35309556);b=this.__pj_crypt_md5_hh(b,c,d,e,a[g+1],4,-1530992060);e=this.__pj_crypt_md5_hh(e,b,c,d,a[g+4],11,1272893353);d=this.__pj_crypt_md5_hh(d,e,b,c,a[g+7],16,-155497632);c=this.__pj_crypt_md5_hh(c,d,e,b,a[g+10],23,-1094730640);b=this.__pj_crypt_md5_hh(b,c,d,e,a[g+13],4,681279174);e=this.__pj_crypt_md5_hh(e,b,c,d,a[g+0],11,-358537222);d=this.__pj_crypt_md5_hh(d,e,b,c,a[g+3],16,-722521979);c=this.__pj_crypt_md5_hh(c,d,e,b,a[g+6],23,76029189);b=this.__pj_crypt_md5_hh(b,c,d,e,a[g+9],4,-640364487);e=this.__pj_crypt_md5_hh(e,b,c,d,a[g+12],11,-421815835);d=this.__pj_crypt_md5_hh(d,e,b,c,a[g+15],16,530742520);c=this.__pj_crypt_md5_hh(c,d,e,b,a[g+2],23,-995338651);b=this.__pj_crypt_md5_ii(b,c,d,e,a[g+0],6,-198630844);e=this.__pj_crypt_md5_ii(e,b,c,d,a[g+7],10,1126891415);d=this.__pj_crypt_md5_ii(d,e,b,c,a[g+14],15,-1416354905);c=this.__pj_crypt_md5_ii(c,d,e,b,a[g+5],21,-57434055);b=this.__pj_crypt_md5_ii(b,c,d,e,a[g+12],6,1700485571);e=this.__pj_crypt_md5_ii(e,b,c,d,a[g+3],10,-1894986606);d=this.__pj_crypt_md5_ii(d,e,b,c,a[g+10],15,-1051523);c=this.__pj_crypt_md5_ii(c,d,e,b,a[g+1],21,-2054922799);b=this.__pj_crypt_md5_ii(b,c,d,e,a[g+8],6,1873313359);e=this.__pj_crypt_md5_ii(e,b,c,d,a[g+15],10,-30611744);d=this.__pj_crypt_md5_ii(d,e,b,c,a[g+6],15,-1560198380);c=this.__pj_crypt_md5_ii(c,d,e,b,a[g+13],21,1309151649);b=this.__pj_crypt_md5_ii(b,c,d,e,a[g+4],6,-145523070);e=this.__pj_crypt_md5_ii(e,b,c,d,a[g+11],10,-1120210379);d=this.__pj_crypt_md5_ii(d,e,b,c,a[g+2],15,718787259);c=this.__pj_crypt_md5_ii(c,d,e,b,a[g+9],21,-343485551);b=this.__pj_crypt_safe_add(b,f);c=this.__pj_crypt_safe_add(c,h);d=this.__pj_crypt_safe_add(d,k);e=this.__pj_crypt_safe_add(e,l)}return[b,c,d,e]},__pj_crypt_md5_cmn:function(a,b,c,d,e,g){return this.__pj_crypt_safe_add(this.__pj_crypt_bit_rol(this.__pj_crypt_safe_add(this.__pj_crypt_safe_add(b,a),this.__pj_crypt_safe_add(d,g)),e),c)},__pj_crypt_md5_ff:function(a,b,c,d,e,g,f){return this.__pj_crypt_md5_cmn(b&c|~b&d,a,b,e,g,f)},__pj_crypt_md5_gg:function(a,b,c,d,e,g,f){return this.__pj_crypt_md5_cmn(b&d|c&~d,a,b,e,g,f)},__pj_crypt_md5_hh:function(a,b,c,d,e,g,f){return this.__pj_crypt_md5_cmn(b^c^d,a,b,e,g,f)},__pj_crypt_md5_ii:function(a,b,c,d,e,g,f){return this.__pj_crypt_md5_cmn(c^(b|~d),a,b,e,g,f)},__pj_crypt_safe_add:function(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535},__pj_crypt_bit_rol:function(a,b){return a<<b|a>>>32-b}};Guid=function(a,b){a="";for(var c=24;c--;)a+="abcdefghijklnmopqrstuvwxyz1234567890".substr(parseInt(36*Math.random()),1);c=f.now();for(b="";35<c;)b+="abcdefghijklnmopqrstuvwxyz1234567890".substr(c%35,1),c=parseInt(c/35);0!=c&&(b+="abcdefghijklnmopqrstuvwxyz1234567890".substr(c,1));b=b.split("").reverse().join("");c=b.length;if(8==c)this.R=a+b;else if(8<c)this.R=a+b.substring(c-8);else{for(c=8-c;c--;)a+="abcdefghijklnmopqrstuvwxyz1234567890".substr(parseInt(36*Math.random()),1);this.R=a+b}};Guid.prototype={toString:function(){return this.R}};var q=function(){this.newValue=this.oldValue="";this.keyFlag=0;this.fKField="";this.fieldType=0;this.fieldName="";this.newUpdateFlag=this.newValueInputFlag=0};q.prototype={RestoreMe:function(){1==this.newValueInputFlag&&(this.newValueInputFlag=0,this.oldValue=this.newValue)},getValue:function(){return 0==this.newValueInputFlag?this.oldValue:this.newValue},setNewValue:function(a){switch(this.fieldType){case $CONST.BoundType.F_String:case $CONST.BoundType.F_Clob:case $CONST.BoundType.F_Long:this.newValue=a;break;case $CONST.BoundType.F_Float:this.newValue=$F.strToFloat(a);break;case $CONST.BoundType.F_Int:this.newValue=$F.strToInt(a);break;case $CONST.BoundType.F_Date:if("##?#NOWDD#?##"==a)this.newValue=a;else if($F.isDate(a))try{this.newValue=""==a?"":$F.parseDate(a).format()}catch(b){}else $F.isTime(a)?this.newValue=5>=a.length?"1900-01-01 "+a+":00":"1900-01-01 "+a:this.newValue="1900-01-01";break;case $CONST.BoundType.F_Boolean:"TRUE"==a.toUpperCase()||"1"==a?this.newValue="true":this.newValue="false";break;default:this.newValue=a}this.newValueInputFlag=this.newValue!=this.oldValue||""==this.newValue?1:0},setOldValue:function(a){switch(this.fieldType){case $CONST.BoundType.F_String:case $CONST.BoundType.F_Clob:case $CONST.BoundType.F_Long:this.oldValue=a;break;case $CONST.BoundType.F_Float:this.oldValue=$F.strToFloat(a);break;case $CONST.BoundType.F_Int:this.oldValue=$F.strToInt(a);break;case $CONST.BoundType.F_Date:if("##?#NOWDD#?##"==a)this.oldValue=a;else if($F.isDate(a))try{this.oldValue=$F.parseDate(a).format()}catch(b){}else $F.isTime(a)?this.oldValue=5>=a.length?"1900-01-01 "+a+":00":"1900-01-01 "+a:this.oldValue="1900-01-01";break;case $CONST.BoundType.F_Boolean:"TRUE"==a.toUpperCase()||"1"==a?this.oldValue="true":this.oldValue="false";break;default:this.oldValue=a}},CopyFrom:function(a){this.oldValue=a.oldValue;this.newValue=a.newValue;this.keyFlag=a.keyFlag;this.fKField=a.fKField;this.fieldType=a.fieldType;this.fieldName=a.fieldName;this.newUpdateFlag=a.newUpdateFlag;this.newValueInputFlag=a.newValueInputFlag}};BoundData=function(a){this.curTableName=a?a:"";this.notFindDupli=this.deleteFlag=0;this.createBy=this.createByField=this.createDateField=this.modifyBy=this.modifyByField=this.modifyDateField="";this.allField={};this.allSubs={};this.newFlag=this.notInsert=this.notOperateRec=0;return this};BoundData.prototype={setNotInsert:function(a){this.notInsert=a},parseXML:function(a){var b;try{b=f.parseXML(a)}catch(c){return $PublicFun.err("boundData XML parse Failed",c),console.log(a),null}this.parseOneNode(b.documentElement,this);return this},parseListNode:function(a,b){var c=this;f(b).children().each(function(b,e){a.SubTableAdd($PublicFun.newGuid(),c.parseOneNode(e))})},parseOneNode:function(a,b){var c;b?(c=b,c.curTableName=a.nodeName):c=new BoundData(a.nodeName);a=f(a);1==a.attr("DEL")?c.deleteFlag=1:1==a.attr("NOTEDIT")&&(c.notOperateRec=1);1==a.attr("NOTFIND")&&(c.notFindDupli=1);1==a.attr("NI")&&(c.notInsert=1);var d=this;a.children().each(function(a,b){var e=f(this);if(0<e.children().length)d.parseListNode(c,b);else{b=this.nodeName;var g=e.attr("TYPE"),k=e.attr("PK");a=e.attr("ORG");var l=e.attr("FK"),p=e.attr("New"),e=e.text(),n=$CONST.BoundType.F_String;"num"==g?n=$CONST.BoundType.F_Float:"int"==g?n=$CONST.BoundType.F_Int:"date"==g?n=$CONST.BoundType.F_Date:"bool"==g?n=$CONST.BoundType.F_Boolean:"clob"==g?n=$CONST.BoundType.F_Clob:"long"==g&&(n=$CONST.BoundType.F_Long);k&&c.KeyInfoEdit(b);l&&(g=l.indexOf("."),-1<g?c.KFInfoEdit(b,l.substring(g+1),l.substring(0,g)):c.KFInfoEdit(b,l));a&&c.OldValue(b,a,n);1==p||"1"==p?c.NewValueEdit(b,e,n,1):c.NewValueEdit(b,e,n)}});return c},setModifyInfo:function(a,b,c){this.modifyDateField=a;this.modifyByField=b;this.modifyBy=c;return this},setCreateInfo:function(a,b,c){this.createDateField=a;this.createByField=b;this.createBy=c;return this},addSub:function(a,b){this.allSubs[a]=b},SubTableAdd:function(a,b){this.allSubs[a]=b},getSub:function(a){return this.allSubs(a)},SubTableGetOne:function(a){return this.allSubs[a]},clearSubs:function(){this.allSubs={}},DeleteAllSubTable:function(){this.allSubs={}},deleteSub:function(a){this.allSubs[a]=void 0;delete this.allSubs[a]},SubTableDeleteOne:function(a){this.allSubs[a]=void 0;delete this.allSubs[a]},setKey:function(a){try{var b=a.trim().toUpperCase(),c;this.allField[b]?c=this.allField[b]:(c=new q,c.fieldName=a,this.allField[b]=c);c.keyFlag=1}catch(d){$F.err("Bound","\u4e3b\u952e\u8bbe\u7f6e\u5931\u8d25",d)}return this},KeyInfoEdit:function(a){return this.setKey(a)},setFKey:function(a,b,c){var d=a.trim().toUpperCase(),e;this.allField[d]?e=this.allField[d]:(e=new q,e.fieldName=a,this.allField[d]=e);e.fKField=c?c+"."+b:b;return this},KFInfoEdit:function(a,b,c){return this.setFKey(a,b,c)},NewValueEdit:function(a,b,c,d){return this.setValue(a,b,c,d,0)},OldValue:function(a,b,c,d){return this.setValue(a,b,c,d,1)},setValue:function(a,b,c,d,e){var g,f=a.trim().toUpperCase();this.allField[f]?g=this.allField[f]:(g=new q,g.fieldName=a,this.allField[f]=g);g.fieldType=c||0;e?g.setOldValue(b):g.setNewValue(b);g.newUpdateFlag=d||0;return this},getOldValue:function(a){a=a.trim().toUpperCase();return this.allField[a]?this.allField[a].oldValue:""},getValue:function(a){a=a.trim().toUpperCase();return this.allField[a]?this.allField[a].getValue():""},getData:function(){if(1==this.newFlag&&1==this.deleteFlag)return"";var a="",b=0,c;for(c in this.allField){var d=this.allField[c];if((0<this.newFlag||1==d.newValueInputFlag||1==d.keyFlag||""!=d.fkField)&&c!=this.modifyDateField.toUpperCase()&&c!=this.modifyByField.toUpperCase()&&c!=this.createDateField.toUpperCase()&&c!=this.createByField.toUpperCase()){1==d.newValueInputFlag&&(b=1);a+="\x3c"+d.fieldName;switch(d.fieldType){case $CONST.BoundType.F_Float:a+='  TYPE\x3d"num" ';break;case $CONST.BoundType.F_Int:a+='  TYPE\x3d"int" ';break;case $CONST.BoundType.F_Date:a+='  TYPE\x3d"date" ';break;case $CONST.BoundType.F_Boolean:a+='  TYPE\x3d"bool" ';break;case $CONST.BoundType.F_Clob:a+='  TYPE\x3d"clob" ';break;case $CONST.BoundType.F_Long:a+='  TYPE\x3d"long" '}1==d.keyFlag&&(a+='  PK\x3d"1" ',""!=d.oldValue&&1!=this.newFlag&&(a+=' ORG\x3d"'+d.oldValue+'" '));""!=d.fKField&&(a+=' FK\x3d"'+d.fKField+'" ');1==d.newUpdateFlag&&(a+=' New\x3d"1" ');a=0==d.fieldType||4==d.fieldType||5==d.fieldType?a+("\x3e\x3c![CDATA["+d.getValue()+"]]\x3e\x3c/"+d.fieldName+"\x3e"):a+("\x3e"+d.getValue()+"\x3c/"+d.fieldName+"\x3e")}}d="";for(c in this.allSubs){var e=this.allSubs[c];e&&(d+=e.getData())}if(0==b&&""==d&&0==this.deleteFlag)return"";c="\x3c"+this.curTableName;1==this.deleteFlag&&(c+=' DEL\x3d"1"');1==this.notInsert&&(c+=' NI\x3d"1"');if(this.notFindDupli||1==this.newFlag)c+='  NOTFIND\x3d"1"';c=0==b||1==this.notOperateRec?c+'  NOTEDIT\x3d"1" \x3e':c+"\x3e";c+=a;1==b&&(""!=this.modifyDateField&&(c+="\x3c"+this.modifyDateField+' TYPE\x3d"date" \x3e##?#NOWDD#?##\x3c/'+this.modifyDateField+"\x3e"),""!=this.modifyByField&&(c+="\x3c"+this.modifyByField+"\x3e\x3c![CDATA["+this.modifyBy+"]]\x3e\x3c/"+this.modifyByField+"\x3e"),""!=this.createDateField&&this.createDateField.toUpperCase()!=this.modifyDateField.toUpperCase()&&(c+="\x3c"+this.createDateField+' TYPE\x3d"date" New\x3d"1" \x3e##?#NOWDD#?##\x3c/'+this.createDateField+"\x3e"),""!=this.createByField&&this.createByField.toUpperCase()!=this.modifyByField.toUpperCase()&&(c+="\x3c"+this.createByField+' New\x3d"1" \x3e\x3c![CDATA['+this.createBy+"]]\x3e\x3c/"+this.createByField+"\x3e"));""!=d&&(c+="\x3cSubT\x3e"+d+"\x3c/SubT\x3e");return c+="\x3c/"+this.curTableName+"\x3e"}};CustEvent=function(a){this.name=a||"\u672a\u5b9a\u4e49";this.id=(new Guid).toString();this.evtMap={};return this};CustEvent.prototype={clear:function(){this.evtMap=void 0},register:function(a,b,c,d){this.evtMap[a]||(this.evtMap[a]={});this.evtMap[a][b]||(this.evtMap[a][b]=[]);this.evtMap[a][b].push({callback:c,ev:d});return this},registerAll:function(a,b,c,d){var e=this;f.each(a,function(a,f){e.register(f,b,c,d)});return e},removeOneSub:function(a,b,c){a.hasOwnProperty(b)&&(0<$F.sL(c)?$F.sTU(a[b].ev)==$F.sTU($F.ev)&&delete a[b]:delete a[b])},remove:function(a,b,c){if(void 0===b)for(b in this.evtMap)this.removeOneSub(this.evtMap[b],a,c);else this.evtMap[b]&&this.removeOneSub(this.evtMap[b],a,c);return this},notify:function(a,b,c){if(this.evtMap[a])if(c)this.evtMap[a][c]&&f.each(this.evtMap[a][c],function(a,c){f.isFunction(c.callback)&&c.callback(b,c.ev)});else for(var d in this.evtMap[a])f.each(this.evtMap[a][d],function(a,c){f.isFunction(c.callback)&&c.callback(b,c.ev)});return this}};window.alert=$F.info})(jQuery);