(function(b){var f=function(d,c){var a=this;a.ObjDom=b(d);a.options=b.extend({width:"300px",height:"100px",top:void 0,left:void 0,backcolor:"#FFFFFF",noTitle:!1,caption:"",modelShow:!1,maxbtn:!0,closebtn:!0,escapable:!0,removable:!0,onClose:void 0,onCloseBefore:void 0,onOpen:void 0,canMove:!0,canSize:!0,onSize:!1,closebar:!1,closeOk:!0,closeCancel:!0,parentDom:void 0,otherClose:!1},c);c={"background-color":a.options.backcolor,width:a.options.width,height:a.options.height};a.winRoot=b("\x3cdiv class\x3d'popWinDig'/\x3e").css(c);void 0==a.options.parentDom?a.winRoot.appendTo("body"):a.winRoot.appendTo(a.options.parentDom);a.winRoot.css({"z-index":1001});a.options.top||(c=a.winRoot.outerHeight(),c=(b(window).height()-c)/2,0>c&&(c=0),a.options.top=c+"px");a.winRoot.css("top",a.options.top);if(!a.options.left){var e=a.winRoot.outerWidth(),e=(b(window).width()-e)/2;0>e&&(e=0);a.options.left=e+"px"}a.winRoot.css("left",a.options.left);a.options.noTitle||(a.winRoot.hover(function(){a.winTitle.addClass("activeselect")},function(){a.winTitle.removeClass("activeselect")}),a.winTitle=b("\x3cdiv class\x3d'popWinTitle unselectable' \x3e").appendTo(a.winRoot),b("\x3clabel class\x3d'caption unselectable' \x3e"+a.options.caption+" \x3c/label\x3e").appendTo(a.winTitle),c=b("\x3cdiv class\x3d'btnBar'\x3e").appendTo(a.winTitle),b("\x3ca class\x3d'opico closebtn fa fa-window-close' title\x3d'\u5173\u95ed' style\x3d'float: right'/\x3e").appendTo(c).off("click").on("click",function(){a.destroy()}),b("\x3ca class\x3d'opico maxbtn fa fa-window-maximize'  title\x3d'\u6700\u5927\u5316' style\x3d'float: right' /\x3e").appendTo(c).off("click").on("click",function(){b(this).css({display:"none"});a.winRoot.css({width:"100%",height:"100%",top:"0px",left:"0px"});b(".restorebtn",a.winTitle).css({display:""});b(window).trigger("resize");if(b.isFunction(a.options.onSize))a.options.onSize()}),b("\x3ca class\x3d'opico restorebtn fa fa-window-restore' style\x3d'display: none;float: right' title\x3d'\u6062\u590d\u7a97\u53e3\u5927\u5c0f'   /\x3e").appendTo(c).off("click").on("click",function(){b(this).css({display:"none"});var c={width:a.options.width,height:a.options.height};a.options.top&&(c.top=a.options.top);a.options.left&&(c.left=a.options.left);a.winRoot.css(c);b(".maxbtn",a.winTitle).css({display:""})}),a.options.closebtn||b(".closebtn",a.winTitle).css({display:"none"}),a.options.maxbtn?b(".maxbtn",a.winTitle).css({display:""}):b(".maxbtn",a.winTitle).css({display:"none"}),b(".restorebtn",a.winTitle).css({display:"none"}));a.options.closebar?(a.content=b("\x3cdiv class\x3d'contentUseBar'/\x3e").appendTo(a.winRoot),a.btBar=b("\x3cdiv class\x3d'BtBar'/\x3e").appendTo(a.winRoot),a.options.closeCancel&&b("\x3cbutton class\x3d'fa fa-remove unselectable  btBarCancel' style\x3d'float: right;margin-right: 10px;width: 80px;height: 25px;' \x3e\u53d6\u6d88\x3c/button\x3e ").off("click").on("click",function(){b.isFunction(a.options.cancelClick)?a.options.cancelClick(a.content)&&a.destroy():a.destroy()}).appendTo(a.btBar),a.options.closeOk&&b("\x3cbutton class\x3d'fa fa-check unselectable  btBarOk' style\x3d'float: right;margin-right: 1px;width: 80px;height: 25px;' \x3e\u786e\u5b9a\x3c/button\x3e ").off("click").on("click",function(){b.isFunction(a.options.okClick)?a.options.okClick(a.content)&&a.destroy():a.destroy()}).appendTo(a.btBar)):a.content=b("\x3cdiv class\x3d'content'/\x3e").appendTo(a.winRoot);a.options.otherClose&&(a.winRoot.off("click").on("click",function(a){a.stopImmediatePropagation()}),setTimeout(function(){if(!a.options.modelShow||!a.maskObj)b(document).one("click",function(){a.destroy()})},100));b(d).appendTo(a.content);a.options.canMove&&a.winRoot.draggable({handle:".popWinTitle",start:function(){},drag:function(){},stop:function(){a.options.left=a.winRoot.css("left");a.options.top=a.winRoot.css("top")}});a.options.canSize&&a.winRoot.resizable({stop:function(c,d){a.options.width=d.size.width+"px";a.options.height=d.size.height+"px";if(a.options.maxbtn&&!a.options.noTitle){var e=b(".restorebtn",a.winTitle);"none"!=e.css("display")&&(e.css({display:"none"}),b(".maxbtn",a.winTitle).css({display:""}))}if(b.isFunction(a.options.onSize))a.options.onSize(c,d)}});a.ObjDom.css("display","");b(d).data("jqform",this);a.options.modelShow&&(e=a.winRoot.outerWidth(),c=a.winRoot.outerHeight(),e=(b(window).width()-e)/2,c=(b(window).height()-c)/2,a.maskObj=b("\x3cdiv  class\x3d'ui-screenMasker'\x3e\x3c/div\x3e").css({position:"fixed",top:0,left:0,height:"100%",width:"100%",backgroundColor:"#aaaaaa",opacity:".3",filter:"alpha(opacity\x3d30)","-moz-opacity":".3",cursor:"auto",zIndex:1001}).appendTo(b("body")).after(a.winRoot),a.winRoot.css({"z-index":1001}),a.maskObj.on("click",function(b){b.stopImmediatePropagation();a.options.otherClose&&a.destroy()}));if(b.isFunction(a.options.onOpen))a.options.onOpen();return this};f.prototype={destroy:function(d){if(void 0!=this.ObjDom&&!(1!=d&&this.options&&this.options.onCloseBefore&&b.isFunction(this.options.onCloseBefore)&&!1===this.options.onCloseBefore())){d={hide:0};if(this.options&&this.options.onClose&&b.isFunction(this.options.onClose))this.options.onClose(d);this.ObjDom.data("jqform","");1==d.hide?(this.ObjDom.css("display","none"),this.ObjDom.appendTo("body")):this.ObjDom.remove().html("").empty();this.ObjDom=void 0;this.maskObj&&(this.maskObj.remove(),delete this.maskObj);!this.options.noTitle&&this.winTitle&&(this.winTitle.remove(),delete this.winTitle);delete this.options;this.content&&(this.content.remove(),delete this.content);this.winRoot&&(this.winRoot.remove(),delete this.winRoot)}},disable:function(){},setCloseBtn:function(){},setMaxBtn:function(){},setCatpion:function(d){this.options.noTitle||b(".caption",this.winTitle).html(d);return this}};b.fn.jqform=function(d){return b(this).each(function(c,a){b(a).data("jqform")||new f(a,d)}).data("jqform")}})(jQuery);