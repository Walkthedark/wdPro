define(function(require) {
	var $ = require("jquery");
	var justep = require("$UI/system/lib/justep");
	require("$UI/maintenanceOrderMessa/signature-pad/jquery.signaturepad");
	var fn = require("$UI/maintenanceOrderMessa/common/requestServer");
	var inface = require("$UI/maintenanceOrderMessa/common/interfaceAdress");
	var userCode,data=""; 
	var Model = function() {
		this.callParent();
		this.id;
		this.flag;
		regFromWxSer();
	};

	Model.prototype.button2Click = function(event) {
		data = $('#signature').signaturePad().getSignatureImage();
		var image = document.createElement("img");
		image.src = data;
		$(".signature-image")[0].appendChild(image);
		
	};
	function regFromWxSer() {
	
	$('#signature').signaturePad({
			drawOnly : true,
			validateFields : true,
			lineWidth : 0,
			output : null,
			sigNav : null,
			name : null,
			typed : null,
			typeIt : null,
			drawIt : null,
			typeItDesc : null,
			drawItDesc : null
		});
	
	}
	$(function() {
		$('#signature').signaturePad({
			drawOnly : true,
			validateFields : true,
			lineWidth : 0,
			output : null,
			sigNav : null,
			name : null,
			typed : null,
			typeIt : null,
			drawIt : null,
			typeItDesc : null,
			drawItDesc : null
		});
	})

	function clearSignature() {
//		$('#signature').signaturePad().clearCanvas();
//		$('.signature-image').html("");
	}

	function saveSignature() {
//		alert($('#signature').signaturePad().getSignatureString());
	}

	// function saveSignatureImage() {
	// var data = $('#signature').signaturePad().getSignatureImage();
	//
	// var image = document.createElement("img");
	// image.src = data;
	// $(".signature-image")[0].appendChild(image);
	// }
	Model.prototype.button1Click = function(event){
		$('#signature').signaturePad().clearCanvas();
		$('.signature-image').html("");
	};
	Model.prototype.modelParamsReceive = function(event){
		
		//获取值
		this.id = this.params.data.id;
		this.flag =  this.params.data.flag;
	};
	//保存签名
	Model.prototype.button3Click = function(event){
		//alert(data.toString());
//		if(data.toString() =="undefined"){
//			alert("11")
//		}
		var me = this;
		data = $('#signature').signaturePad().getSignatureImage();
		var image = document.createElement("img");
		image.src = data;
		$(".signature-image")[0].appendChild(image);
//		if(data == "" ){
//				justep.Util.hint("请先成成图片"); 
//		}
//		return
//		justep.Baas.sendRequest({
//			"url" : "/WjWorkOrder/workOrder",
//			"action" : "savesignatureimage",
//			"async" : false,
//			"params" : {
//				"TaskId" : TaskId,
//				"userCode" : userCode,
//				"data" :data.toString(),
//			},
//			"success" : function(data) {
//				justep.Util.hint("保存图片成功"); 
//				me.close();
//			}
		//});
	};
	Model.prototype.resetBtnClick = function(event){
		this.close();
	};
	Model.prototype.okBtnClick = function(event){
		var me = this;
		data = $('#signature').signaturePad().getSignatureImage();
		var image = document.createElement("img");
		image.src = data;
		
		if (data == "data:image/png;base64,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") {
			layer.msg('请签字保存');
			return;
		}
		if (data == "data:image/png;base64,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") {
			layer.msg('请签字保存');
			return;
		}
		
		
		$(".signature-image")[0].appendChild(image);
		var params ={};
		params.id=this.id;
		params.opSign=data.toString();
		var resData;
		if(this.flag == 0){
			
			resData = fn.requestPost(inface.addopSign, params, false,"签名");
		}else{
		
			resData = fn.requestPost(inface.PlanaddopSign, params, false,"签名");
		}	
		if(resData.error == 0){
			layer.msg('签字成功,为您返回上一层，请稍后', {
					icon : 1
				});
				this.comp("timer1").start();
			//刷新父类数据
			//this.params.data.method.refashGetParent(event);
			this.getParentModel().refashGetParent(event);
		}
	};
	//
	Model.prototype.timer1Stop = function(event){
		this.close();
	};
	return Model;
});